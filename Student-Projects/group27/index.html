<!doctype html>
<html lang="fa" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');
        
        body {
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.15);
        }
        
        .specialty-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .specialty-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
        }
        
        .specialty-selected {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tab-active {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            color: white;
            box-shadow: 0 4px 15px -3px rgba(59, 130, 246, 0.4);
        }
        
        .tab-inactive {
            background-color: #f8fafc;
            color: #64748b;
        }
        
        .tab-inactive:hover {
            background-color: #e2e8f0;
        }
        
        .ai-tab-active {
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            color: white;
            box-shadow: 0 4px 15px -3px rgba(124, 58, 237, 0.4);
        }
        
        .ai-tab-inactive {
            background-color: #f8fafc;
            color: #64748b;
        }
        
        .ai-tab-inactive:hover {
            background-color: #e2e8f0;
        }
        
        .ai-feature-content {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-gray-50 min-h-full"><!-- Header -->
  <header class="gradient-bg text-white py-8 shadow-xl">
   <div class="container mx-auto px-6">
    <div class="flex items-center justify-between">
     <div class="flex items-center space-x-6 space-x-reverse">
      <div class="text-5xl">
       ๐ฅ
      </div>
      <div>
       <h1 id="system-title" class="text-4xl font-bold mb-2">ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู</h1>
       <p id="hospital-name" class="text-xl opacity-90">ุจูุงุฑุณุชุงู ุงูุงู ุฎูู</p>
      </div>
     </div>
     <div class="text-left">
      <div class="text-lg font-semibold mb-1">
       ุงูุฑฺุงูุณ: <span id="emergency-phone">115</span>
      </div>
      <div class="text-sm opacity-75" id="current-time"></div>
     </div>
    </div>
   </div>
  </header><!-- Navigation -->
  <nav class="bg-white shadow-lg border-b">
   <div class="container mx-auto px-6">
    <div class="flex space-x-2 space-x-reverse py-2"><button onclick="showSection('home')" id="tab-home" class="tab-active px-6 py-4 font-semibold rounded-lg transition-all"> ๐ ุตูุญู ุงุตู </button> <button onclick="showSection('clinics')" id="tab-clinics" class="tab-inactive px-6 py-4 font-semibold rounded-lg transition-all"> ๐ฅ ุฏุฑูุงูฺฏุงูโูุง </button> <button onclick="showSection('appointments')" id="tab-appointments" class="tab-inactive px-6 py-4 font-semibold rounded-lg transition-all"> ๐ ููุจุชโุฏู </button> <button onclick="showSection('ai-consultation')" id="tab-ai-consultation" class="tab-inactive px-6 py-4 font-semibold rounded-lg transition-all"> ๐ค ูุดุงูุฑู ููุดููุฏ </button> <button onclick="showSection('records')" id="tab-records" class="tab-inactive px-6 py-4 font-semibold rounded-lg transition-all"> ๐ ุณูุงุจู </button>
    </div>
   </div>
  </nav>
  <div class="container mx-auto px-6 py-8"><!-- Home Section -->
   <div id="home-section" class="section-content">
    <div class="text-center mb-12">
     <h2 class="text-4xl font-bold text-gray-800 mb-4">ุจู ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู ุฎูุด ุขูุฏุฏ</h2>
     <p class="text-xl text-gray-600">ุจูุชุฑู ุฎุฏูุงุช ูพุฒุดฺฉ ุฑุง ุงุฒ ูุง ุฏุฑุงูุช ฺฉูุฏ</p>
    </div><!-- Quick Actions -->
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
     <div class="card-hover bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" onclick="showSection('appointments')">
      <div class="text-4xl mb-4">
       ๐
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-2">ุฑุฒุฑู ููุจุช</h3>
      <p class="text-gray-600">ููุจุช ุฎูุฏ ุฑุง ุจุง ูุชุฎุตุตุงู ุฑุฒุฑู ฺฉูุฏ</p>
     </div>
     <div class="card-hover bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" onclick="showSection('clinics')">
      <div class="text-4xl mb-4">
       ๐ฅ
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-2">ุฏุฑูุงูฺฏุงูโูุง</h3>
      <p class="text-gray-600">ูุดุงูุฏู ุชุฎุตุตโูุง ู ูพุฒุดฺฉุงู</p>
     </div>
     <div class="card-hover bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" onclick="showSection('ai-consultation')">
      <div class="text-4xl mb-4">
       ๐ค
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-2">ูุดุงูุฑู ููุดููุฏ</h3>
      <p class="text-gray-600">ูุดุงูุฑู ุฑุงฺฏุงู ุจุง ููุด ูุตููุน</p>
     </div>
     <div class="card-hover bg-white rounded-xl shadow-lg p-6 text-center cursor-pointer" onclick="showSection('records')">
      <div class="text-4xl mb-4">
       ๐
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-2">ุณูุงุจู ูพุฒุดฺฉ</h3>
      <p class="text-gray-600">ูุดุงูุฏู ุชุงุฑุฎฺู ูุฑุงุฌุนุงุช</p>
     </div>
     <div class="card-hover bg-white rounded-xl shadow-lg p-6 text-center">
      <div class="text-4xl mb-4">
       ๐จ
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-2">ุงูุฑฺุงูุณ</h3>
      <p class="text-gray-600">ุชูุงุณ ููุฑ: <span id="emergency-display">115</span></p>
     </div>
    </div><!-- Hospital Stats -->
    <div class="bg-white rounded-xl shadow-lg p-8 mb-12">
     <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">ุขูุงุฑ ุจูุงุฑุณุชุงู</h3>
     <div class="grid md:grid-cols-4 gap-6 text-center">
      <div>
       <div class="text-3xl font-bold text-blue-600 mb-2">
        12
       </div>
       <div class="text-gray-600">
        ุชุฎุตุต ูพุฒุดฺฉ
       </div>
      </div>
      <div>
       <div class="text-3xl font-bold text-green-600 mb-2">
        48
       </div>
       <div class="text-gray-600">
        ูพุฒุดฺฉ ูุชุฎุตุต
       </div>
      </div>
      <div>
       <div class="text-3xl font-bold text-purple-600 mb-2">
        24/7
       </div>
       <div class="text-gray-600">
        ุฎุฏูุงุช ุงูุฑฺุงูุณ
       </div>
      </div>
      <div>
       <div class="text-3xl font-bold text-orange-600 mb-2" id="total-records">
        0
       </div>
       <div class="text-gray-600">
        ุจูุงุฑ ุซุจุช ุดุฏู
       </div>
      </div>
     </div><!-- Symptom Checker Feature -->
     <div id="ai-feature-symptom-checker" class="ai-feature-content hidden">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
       <div class="text-center mb-8">
        <div class="text-6xl mb-4">
         ๐
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">ุชุดุฎุต ููุดููุฏ ุนูุงุฆู</h3>
        <p class="text-gray-600">ุนูุงุฆู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ุงุญุชูุงูโุชุฑู ุนูู ู ุฑุงูโูุง ุฏุฑูุงู ุฑุง ุจุฏุงูุฏ</p>
       </div>
       <form id="symptomForm" class="space-y-6">
        <div class="grid md:grid-cols-2 gap-6">
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณู</label> <select id="symptomAge" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="child">ฺฉูุฏฺฉ (ุฒุฑ 12 ุณุงู)</option> <option value="teen">ููุฌูุงู (12-18 ุณุงู)</option> <option value="adult">ุจุฒุฑฺฏุณุงู (18-65 ุณุงู)</option> <option value="elderly">ุณุงูููุฏ (ุจุงูุง 65 ุณุงู)</option> </select>
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุฌูุณุช</label> <select id="symptomGender" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="male">ูุฑุฏ</option> <option value="female">ุฒู</option> </select>
         </div>
        </div>
        <div><label class="block text-sm font-semibold text-gray-700 mb-4">ุนูุงุฆู ุงุตู (ุญุฏุงูู ฺฉ ุงูุชุฎุงุจ ฺฉูุฏ)</label>
         <div class="grid md:grid-cols-3 gap-3" id="symptom-checkboxes"><!-- Symptoms will be loaded here -->
         </div>
        </div>
        <div><label for="symptomDuration" class="block text-sm font-semibold text-gray-700 mb-2">ูุฏุช ุฒูุงู ุนูุงุฆู</label> <select id="symptomDuration" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="hours">ฺูุฏ ุณุงุนุช</option> <option value="1-2days">1-2 ุฑูุฒ</option> <option value="3-7days">3-7 ุฑูุฒ</option> <option value="1-2weeks">1-2 ููุชู</option> <option value="months">ฺูุฏ ูุงู</option> </select>
        </div>
        <div><label for="symptomSeverity" class="block text-sm font-semibold text-gray-700 mb-2">ุดุฏุช ุนูุงุฆู</label>
         <div class="flex items-center space-x-4 space-x-reverse"><input type="range" id="symptomSeverity" min="1" max="10" value="5" class="flex-1"> <span id="severityValue" class="text-lg font-bold text-blue-600">5</span> <span class="text-sm text-gray-600">(1: ุฎูู - 10: ุดุฏุฏ)</span>
         </div>
        </div><button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-all"> ๐ ุชุญูู ุนูุงุฆู </button>
       </form>
       <div id="symptom-results" class="hidden mt-8 p-6 bg-gray-50 rounded-lg"><!-- Results will be shown here -->
       </div>
      </div>
     </div><!-- Drug Interaction Checker -->
     <div id="ai-feature-drug-interaction" class="ai-feature-content hidden">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
       <div class="text-center mb-8">
        <div class="text-6xl mb-4">
         ๐
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">ุจุฑุฑุณ ุชุฏุงุฎู ุฏุงุฑู</h3>
        <p class="text-gray-600">ุฏุงุฑููุง ูุตุฑู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ุชุฏุงุฎูุงุช ุงุญุชูุงู ุจุฑุฑุณ ุดูุฏ</p>
       </div>
       <div class="space-y-6">
        <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฒูุฏู ุฏุงุฑู</label>
         <div class="flex space-x-3 space-x-reverse"><input type="text" id="drugInput" placeholder="ูุงู ุฏุงุฑู ุฑุง ูุงุฑุฏ ฺฉูุฏ..." class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <button onclick="addDrug()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-all"> โ ุงูุฒูุฏู </button>
         </div>
        </div>
        <div id="drug-list" class="space-y-3"><!-- Added drugs will appear here -->
        </div><button onclick="checkDrugInteractions()" id="checkInteractionBtn" class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-all disabled:bg-gray-400" disabled> ๐ ุจุฑุฑุณ ุชุฏุงุฎูุงุช </button>
        <div id="interaction-results" class="hidden"><!-- Interaction results will be shown here -->
        </div>
       </div>
      </div>
     </div><!-- Health Tips Generator -->
     <div id="ai-feature-health-tips" class="ai-feature-content hidden">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
       <div class="text-center mb-8">
        <div class="text-6xl mb-4">
         ๐ก
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">ุชูุตูโูุง ุดุฎุตโุณุงุฒ ุดุฏู</h3>
        <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุณูุ ุฌูุณุช ู ุดุฑุงุท ุฎุงุตุ ุชูุตูโูุง ุณูุงูุช ุฏุฑุงูุช ฺฉูุฏ</p>
       </div>
       <form id="healthTipsForm" class="space-y-6">
        <div class="grid md:grid-cols-3 gap-6">
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณู</label> <input type="number" id="tipsAge" min="1" max="120" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุฌูุณุช</label> <select id="tipsGender" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="male">ูุฑุฏ</option> <option value="female">ุฒู</option> </select>
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณุทุญ ูุนุงูุช</label> <select id="tipsActivity" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="low">ฺฉู (ฺฉูุชุฑ ุงุฒ 2 ุณุงุนุช ุฏุฑ ููุชู)</option> <option value="moderate">ูุชูุณุท (2-5 ุณุงุนุช ุฏุฑ ููุชู)</option> <option value="high">ุฒุงุฏ (ุจุด ุงุฒ 5 ุณุงุนุช ุฏุฑ ููุชู)</option> </select>
         </div>
        </div>
        <div><label class="block text-sm font-semibold text-gray-700 mb-4">ุดุฑุงุท ุฎุงุต (ุงุฎุชุงุฑ)</label>
         <div class="grid md:grid-cols-2 gap-3"><label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="diabetes" class="condition-checkbox"> <span>ุฏุงุจุช</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="hypertension" class="condition-checkbox"> <span>ูุดุงุฑ ุฎูู ุจุงูุง</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="heart" class="condition-checkbox"> <span>ุจูุงุฑ ููุจ</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="pregnancy" class="condition-checkbox"> <span>ุจุงุฑุฏุงุฑ</span> </label>
         </div>
        </div><button type="submit" class="w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 transition-all"> ๐ก ุฏุฑุงูุช ุชูุตูโูุง </button>
       </form>
       <div id="health-tips-results" class="hidden mt-8"><!-- Health tips will be shown here -->
       </div>
      </div>
     </div><!-- Appointment Suggestion -->
     <div id="ai-feature-appointment-suggest" class="ai-feature-content hidden">
      <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
       <div class="text-center mb-8">
        <div class="text-6xl mb-4">
         ๐
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">ูพุดููุงุฏ ุชุฎุตุต ููุงุณุจ</h3>
        <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุนูุงุฆู ุดูุงุ ููุงุณุจโุชุฑู ุชุฎุตุต ู ูพุฒุดฺฉ ุฑุง ูพุดููุงุฏ ูโุฏูู</p>
       </div>
       <form id="suggestionForm" class="space-y-6">
        <div><label for="suggestionSymptoms" class="block text-sm font-semibold text-gray-700 mb-2">ุนูุงุฆู ู ูุดฺฉู ุฎูุฏ ุฑุง ุดุฑุญ ุฏูุฏ</label> <textarea id="suggestionSymptoms" rows="4" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ูุซุงู: ุณุฑุฏุฑุฏ ูุฏุงููุ ุญุณุงุณุช ุจู ููุฑุ ุชููุน..."></textarea>
        </div>
        <div class="grid md:grid-cols-2 gap-6">
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุช ุฒูุงู</label> <select id="suggestionUrgency" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="routine">ูุนููู (ุชุง 2 ููุชู)</option> <option value="urgent">ููุฑ (ุชุง 3 ุฑูุฒ)</option> <option value="emergency">ุงูุฑฺุงูุณ (ููู ุงูุฑูุฒ)</option> </select>
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณุงุจูู ูุฑุงุฌุนู</label> <select id="suggestionHistory" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="first">ุงููู ุจุงุฑ</option> <option value="followup">ูพฺฏุฑ ุฏุฑูุงู</option> <option value="second-opinion">ูุธุฑ ุฏูู</option> </select>
         </div>
        </div><button type="submit" class="w-full bg-purple-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-purple-700 transition-all"> ๐ฏ ุฏุฑุงูุช ูพุดููุงุฏ </button>
       </form>
       <div id="suggestion-results" class="hidden mt-8"><!-- Suggestions will be shown here -->
       </div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Clinics Section -->
  <div id="clinics-section" class="section-content hidden">
   <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-gray-800 mb-4">๐ฅ ุฏุฑูุงูฺฏุงูโูุง ุชุฎุตุต</h2>
    <p class="text-xl text-gray-600">ุจูุชุฑู ูุชุฎุตุตุงู ุฏุฑ ุฎุฏูุช ุดูุง</p>
   </div>
   <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="clinics-grid"><!-- Clinics will be loaded here -->
   </div>
  </div><!-- Appointments Section -->
  <div id="appointments-section" class="section-content hidden">
   <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-gray-800 mb-4">๐ ุฑุฒุฑู ููุจุช</h2>
    <p class="text-xl text-gray-600">ููุจุช ุฎูุฏ ุฑุง ุจุง ุจูุชุฑู ูุชุฎุตุตุงู ุฑุฒุฑู ฺฉูุฏ</p>
   </div><!-- Step 1: Specialty Selection -->
   <div id="step-specialty" class="bg-white rounded-xl shadow-lg p-8 mb-8">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">ูุฑุญูู ฑ: ุงูุชุฎุงุจ ุชุฎุตุต</h3>
    <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-6" id="specialty-selection"><!-- Specialties will be loaded here -->
    </div>
   </div><!-- Step 2: Doctor Selection -->
   <div id="step-doctor" class="bg-white rounded-xl shadow-lg p-8 mb-8 hidden">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">ูุฑุญูู ฒ: ุงูุชุฎุงุจ ูพุฒุดฺฉ</h3>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="doctor-selection"><!-- Doctors will be loaded here -->
    </div>
   </div><!-- Step 3: Appointment Form -->
   <div id="step-form" class="bg-white rounded-xl shadow-lg p-8 mb-8 hidden">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">ูุฑุญูู ณ: ุชฺฉูู ุงุทูุงุนุงุช</h3>
    <form id="appointmentForm" class="space-y-6">
     <div class="grid md:grid-cols-2 gap-6">
      <div><label for="patientName" class="block text-sm font-semibold text-gray-700 mb-2">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ *</label> <input type="text" id="patientName" name="patientName" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
      </div>
      <div><label for="patientPhone" class="block text-sm font-semibold text-gray-700 mb-2">ุดูุงุฑู ุชูุงุณ *</label> <input type="tel" id="patientPhone" name="patientPhone" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
      </div>
     </div>
     <div class="grid md:grid-cols-2 gap-6">
      <div><label for="patientAge" class="block text-sm font-semibold text-gray-700 mb-2">ุณู *</label> <input type="number" id="patientAge" name="patientAge" required min="1" max="120" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
      </div>
      <div><label for="appointmentDate" class="block text-sm font-semibold text-gray-700 mb-2">ุชุงุฑุฎ ูุฑุงุฌุนู *</label> <input type="date" id="appointmentDate" name="appointmentDate" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
      </div>
     </div>
     <div><label class="block text-sm font-semibold text-gray-700 mb-4">ุงูุชุฎุงุจ ุณุงุนุช *</label>
      <div class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3" id="time-slots"><!-- Time slots will be loaded here -->
      </div>
     </div>
     <div><label for="appointmentSymptoms" class="block text-sm font-semibold text-gray-700 mb-2">ุนูุช ูุฑุงุฌุนู</label> <textarea id="appointmentSymptoms" name="appointmentSymptoms" rows="4" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="ุนูุงุฆู ุง ุฏูู ูุฑุงุฌุนู ุฎูุฏ ุฑุง ุจููุณุฏ..."></textarea>
     </div>
     <div class="flex justify-center space-x-4 space-x-reverse"><button type="submit" id="bookAppointmentBtn" class="bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-green-700 transition-all shadow-lg"> โ ุชุงุฏ ู ุฑุฒุฑู ููุจุช </button> <button type="button" onclick="resetAppointment()" class="bg-gray-600 text-white px-6 py-4 rounded-lg font-bold hover:bg-gray-700 transition-all"> ๐ ุดุฑูุน ูุฌุฏุฏ </button>
     </div>
    </form>
   </div>
  </div><!-- AI Consultation Section -->
  <div id="ai-consultation-section" class="section-content hidden">
   <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-gray-800 mb-4">๐ค ูุดุงูุฑู ููุดููุฏ ูพุฒุดฺฉ</h2>
    <p class="text-xl text-gray-600">ูุดุงูุฑู ุฑุงฺฏุงู ู ููุฑ ุจุง ููุด ูุตููุน ุฏุฑุจุงุฑู ุนูุงุฆู ู ุจูุงุฑโูุง</p>
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6 max-w-4xl mx-auto">
     <p class="text-yellow-800 font-semibold">โ๏ธ ุชูุฌู: ุงู ูุดุงูุฑู ุฌุงฺฏุฒู ูุฒุช ูพุฒุดฺฉ ูุณุช ู ุตุฑูุงู ุฌูุช ุงุทูุงุนโุฑุณุงู ุงููู ุงุณุช</p>
    </div>
    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mt-4 max-w-4xl mx-auto">
     <div class="flex items-center space-x-3 space-x-reverse mb-2"><span class="text-2xl">โ</span>
      <h4 class="font-bold text-green-800">ููุด ูุตููุน ูุนุงู ุงุณุช</h4>
     </div>
     <p class="text-green-700 text-sm mb-2">ุณุณุชู ุจู OpenAI GPT-3.5 ูุชุตู ุดุฏู ู ุขูุงุฏู ูพุงุณุฎฺฏู ููุดููุฏ ุงุณุช</p>
     <div class="bg-white rounded p-3 text-xs font-mono text-gray-700">
      <div>
       โ OpenAI API: ูุนุงู
      </div>
      <div>
       โ ูุฏู: GPT-3.5-turbo
      </div>
      <div>
       โ ุฒุจุงู: ูุงุฑุณ
      </div>
     </div>
     <p class="text-green-600 text-xs mt-2">ุญุงูุง ูโุชูุงูุฏ ุณูุงูุงุช ูพุฒุดฺฉ ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉูุฏ ู ูพุงุณุฎโูุง ููุดููุฏ ุฏุฑุงูุช ฺฉูุฏ</p>
    </div>
   </div><!-- AI Features Tabs -->
   <div class="max-w-6xl mx-auto mb-8">
    <div class="flex flex-wrap justify-center space-x-2 space-x-reverse mb-8"><button onclick="showAIFeature('chat')" id="ai-tab-chat" class="ai-tab-active px-6 py-3 font-semibold rounded-lg transition-all"> ๐ฌ ฺุช ููุดููุฏ </button> <button onclick="showAIFeature('symptom-checker')" id="ai-tab-symptom-checker" class="ai-tab-inactive px-6 py-3 font-semibold rounded-lg transition-all"> ๐ ุชุดุฎุต ุนูุงุฆู </button> <button onclick="showAIFeature('drug-interaction')" id="ai-tab-drug-interaction" class="ai-tab-inactive px-6 py-3 font-semibold rounded-lg transition-all"> ๐ ุชุฏุงุฎู ุฏุงุฑู </button> <button onclick="showAIFeature('health-tips')" id="ai-tab-health-tips" class="ai-tab-inactive px-6 py-3 font-semibold rounded-lg transition-all"> ๐ก ุชูุตูโูุง ุณูุงูุช </button> <button onclick="showAIFeature('appointment-suggest')" id="ai-tab-appointment-suggest" class="ai-tab-inactive px-6 py-3 font-semibold rounded-lg transition-all"> ๐ ูพุดููุงุฏ ุชุฎุตุต </button>
    </div>
   </div><!-- AI Feature Content -->
   <div class="max-w-6xl mx-auto"><!-- Chat Feature -->
    <div id="ai-feature-chat" class="ai-feature-content">
     <div class="max-w-4xl mx-auto"><!-- Chat Container -->
      <div class="bg-white rounded-xl shadow-lg mb-6">
       <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-xl">
        <div class="flex items-center space-x-4 space-x-reverse">
         <div class="text-3xl">
          ๐ค
         </div>
         <div>
          <h3 class="text-xl font-bold">ุฏุณุชุงุฑ ููุดููุฏ ูพุฒุดฺฉ</h3>
          <p class="text-blue-100">ุขูุงุฏู ูพุงุณุฎฺฏู ุจู ุณูุงูุงุช ุดูุง</p>
         </div>
        </div>
       </div>
       <div id="chat-messages" class="p-6 h-96 overflow-y-auto bg-gray-50">
        <div class="flex items-start space-x-3 space-x-reverse mb-4">
         <div class="text-2xl">
          ๐ค
         </div>
         <div class="bg-white rounded-lg p-4 shadow-sm max-w-md">
          <p class="text-gray-800">ุณูุงู! ูู ุฏุณุชุงุฑ ููุดููุฏ ูพุฒุดฺฉ ูุณุชู. ุนูุงุฆู ุง ูุดฺฉู ุณูุงูุช ุฎูุฏ ุฑุง ุจุฑุง ูู ุชูุถุญ ุฏูุฏ ุชุง ุจุชูุงูู ุฑุงูููุง ุงููู ุงุฑุงุฆู ุฏูู.</p>
         </div>
        </div>
       </div>
       <div class="p-6 border-t bg-white rounded-b-xl">
        <form id="consultationForm" class="flex space-x-3 space-x-reverse"><input type="text" id="userMessage" placeholder="ุนูุงุฆู ุง ุณูุงู ุฎูุฏ ุฑุง ุจููุณุฏ..." class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <button type="submit" id="sendMessageBtn" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all"> ๐ค ุงุฑุณุงู </button>
        </form>
       </div>
      </div><!-- Quick Consultation Topics -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ููุถูุนุงุช ูพุฑุชฺฉุฑุงุฑ</h3>
       <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"><button onclick="quickConsultation('ุณุฑุฏุฑุฏ')" class="text-right p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐ค
         </div>
         <div class="font-semibold text-gray-800">
          ุณุฑุฏุฑุฏ
         </div>
         <div class="text-sm text-gray-600">
          ุงููุงุน ุณุฑุฏุฑุฏ ู ุนูู ุขู
         </div></button> <button onclick="quickConsultation('ุชุจ')" class="text-right p-4 bg-red-50 hover:bg-red-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐ก๏ธ
         </div>
         <div class="font-semibold text-gray-800">
          ุชุจ ู ูุฑุฒ
         </div>
         <div class="text-sm text-gray-600">
          ุนูู ุชุจ ู ุฑุงูโูุง ฺฉูุชุฑู
         </div></button> <button onclick="quickConsultation('ุณุฑูู')" class="text-right p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐ท
         </div>
         <div class="font-semibold text-gray-800">
          ุณุฑูู
         </div>
         <div class="text-sm text-gray-600">
          ุงููุงุน ุณุฑูู ู ุฏุฑูุงู
         </div></button> <button onclick="quickConsultation('ุฏุฑุฏ ุดฺฉู')" class="text-right p-4 bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐คข
         </div>
         <div class="font-semibold text-gray-800">
          ุฏุฑุฏ ุดฺฉู
         </div>
         <div class="text-sm text-gray-600">
          ุนูู ุฏุฑุฏ ุดฺฉู
         </div></button> <button onclick="quickConsultation('ุฎุณุชฺฏ')" class="text-right p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐ด
         </div>
         <div class="font-semibold text-gray-800">
          ุฎุณุชฺฏ
         </div>
         <div class="text-sm text-gray-600">
          ุนูู ุฎุณุชฺฏ ูุฏุงูู
         </div></button> <button onclick="quickConsultation('ุฏุฑุฏ ููุงุตู')" class="text-right p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-all">
         <div class="text-2xl mb-2">
          ๐ฆด
         </div>
         <div class="font-semibold text-gray-800">
          ุฏุฑุฏ ููุงุตู
         </div>
         <div class="text-sm text-gray-600">
          ูุดฺฉูุงุช ููุงุตู ู ุงุณุชุฎูุงู
         </div></button>
       </div>
      </div><!-- Emergency Warning -->
      <div class="bg-red-50 border border-red-200 rounded-xl p-6">
       <div class="flex items-center space-x-3 space-x-reverse mb-4">
        <div class="text-3xl">
         ๐จ
        </div>
        <h3 class="text-xl font-bold text-red-800">ููุงุฑุฏ ุงูุฑฺุงูุณ</h3>
       </div>
       <p class="text-red-700 mb-4">ุฏุฑ ุตูุฑุช ูุฌูุฏ ุงู ุนูุงุฆูุ ููุฑุงู ุจุง ุงูุฑฺุงูุณ ุชูุงุณ ุจฺฏุฑุฏ:</p>
       <ul class="text-red-700 space-y-2">
        <li>โข ุฏุฑุฏ ุดุฏุฏ ููุณู ุณูู</li>
        <li>โข ุชูฺฏ ููุณ ุดุฏุฏ</li>
        <li>โข ุงุฒ ุฏุณุช ุฏุงุฏู ููุดุงุฑ</li>
        <li>โข ุฎููุฑุฒ ุดุฏุฏ</li>
        <li>โข ุฏุฑุฏ ุดุฏุฏ ุดฺฉู</li>
        <li>โข ุนูุงุฆู ุณฺฉุชู ูุบุฒ (ุงุฎุชูุงู ุฏุฑ ุตุญุจุชุ ููุฌ)</li>
       </ul>
       <div class="mt-4 text-center"><span class="text-2xl font-bold text-red-800">ุดูุงุฑู ุงูุฑฺุงูุณ: <span id="emergency-consultation">115</span></span>
       </div>
      </div><!-- Symptom Checker Feature -->
      <div id="ai-feature-symptom-checker" class="ai-feature-content hidden">
       <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
        <div class="text-center mb-8">
         <div class="text-6xl mb-4">
          ๐
         </div>
         <h3 class="text-2xl font-bold text-gray-800 mb-2">ุชุดุฎุต ููุดููุฏ ุนูุงุฆู</h3>
         <p class="text-gray-600">ุนูุงุฆู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ุงุญุชูุงูโุชุฑู ุนูู ู ุฑุงูโูุง ุฏุฑูุงู ุฑุง ุจุฏุงูุฏ</p>
        </div>
        <form id="symptomForm" class="space-y-6">
         <div class="grid md:grid-cols-2 gap-6">
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณู</label> <select id="symptomAge" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="child">ฺฉูุฏฺฉ (ุฒุฑ 12 ุณุงู)</option> <option value="teen">ููุฌูุงู (12-18 ุณุงู)</option> <option value="adult">ุจุฒุฑฺฏุณุงู (18-65 ุณุงู)</option> <option value="elderly">ุณุงูููุฏ (ุจุงูุง 65 ุณุงู)</option> </select>
          </div>
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุฌูุณุช</label> <select id="symptomGender" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="male">ูุฑุฏ</option> <option value="female">ุฒู</option> </select>
          </div>
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-4">ุนูุงุฆู ุงุตู (ุญุฏุงูู ฺฉ ุงูุชุฎุงุจ ฺฉูุฏ)</label>
          <div class="grid md:grid-cols-3 gap-3" id="symptom-checkboxes"><!-- Symptoms will be loaded here -->
          </div>
         </div>
         <div><label for="symptomDuration" class="block text-sm font-semibold text-gray-700 mb-2">ูุฏุช ุฒูุงู ุนูุงุฆู</label> <select id="symptomDuration" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="hours">ฺูุฏ ุณุงุนุช</option> <option value="1-2days">1-2 ุฑูุฒ</option> <option value="3-7days">3-7 ุฑูุฒ</option> <option value="1-2weeks">1-2 ููุชู</option> <option value="months">ฺูุฏ ูุงู</option> </select>
         </div>
         <div><label for="symptomSeverity" class="block text-sm font-semibold text-gray-700 mb-2">ุดุฏุช ุนูุงุฆู</label>
          <div class="flex items-center space-x-4 space-x-reverse"><input type="range" id="symptomSeverity" min="1" max="10" value="5" class="flex-1"> <span id="severityValue" class="text-lg font-bold text-blue-600">5</span> <span class="text-sm text-gray-600">(1: ุฎูู - 10: ุดุฏุฏ)</span>
          </div>
         </div><button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-all"> ๐ ุชุญูู ุนูุงุฆู </button>
        </form>
        <div id="symptom-results" class="hidden mt-8 p-6 bg-gray-50 rounded-lg"><!-- Results will be shown here -->
        </div>
       </div>
      </div><!-- Drug Interaction Checker -->
      <div id="ai-feature-drug-interaction" class="ai-feature-content hidden">
       <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
        <div class="text-center mb-8">
         <div class="text-6xl mb-4">
          ๐
         </div>
         <h3 class="text-2xl font-bold text-gray-800 mb-2">ุจุฑุฑุณ ุชุฏุงุฎู ุฏุงุฑู</h3>
         <p class="text-gray-600">ุฏุงุฑููุง ูุตุฑู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ุชุฏุงุฎูุงุช ุงุญุชูุงู ุจุฑุฑุณ ุดูุฏ</p>
        </div>
        <div class="space-y-6">
         <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฒูุฏู ุฏุงุฑู</label>
          <div class="flex space-x-3 space-x-reverse"><input type="text" id="drugInput" placeholder="ูุงู ุฏุงุฑู ุฑุง ูุงุฑุฏ ฺฉูุฏ..." class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <button onclick="addDrug()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-all"> โ ุงูุฒูุฏู </button>
          </div>
         </div>
         <div id="drug-list" class="space-y-3"><!-- Added drugs will appear here -->
         </div><button onclick="checkDrugInteractions()" id="checkInteractionBtn" class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-all disabled:bg-gray-400" disabled> ๐ ุจุฑุฑุณ ุชุฏุงุฎูุงุช </button>
         <div id="interaction-results" class="hidden"><!-- Interaction results will be shown here -->
         </div>
        </div>
       </div>
      </div><!-- Health Tips Generator -->
      <div id="ai-feature-health-tips" class="ai-feature-content hidden">
       <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
        <div class="text-center mb-8">
         <div class="text-6xl mb-4">
          ๐ก
         </div>
         <h3 class="text-2xl font-bold text-gray-800 mb-2">ุชูุตูโูุง ุดุฎุตโุณุงุฒ ุดุฏู</h3>
         <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุณูุ ุฌูุณุช ู ุดุฑุงุท ุฎุงุตุ ุชูุตูโูุง ุณูุงูุช ุฏุฑุงูุช ฺฉูุฏ</p>
        </div>
        <form id="healthTipsForm" class="space-y-6">
         <div class="grid md:grid-cols-3 gap-6">
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณู</label> <input type="number" id="tipsAge" min="1" max="120" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          </div>
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุฌูุณุช</label> <select id="tipsGender" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="male">ูุฑุฏ</option> <option value="female">ุฒู</option> </select>
          </div>
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณุทุญ ูุนุงูุช</label> <select id="tipsActivity" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option> <option value="low">ฺฉู (ฺฉูุชุฑ ุงุฒ 2 ุณุงุนุช ุฏุฑ ููุชู)</option> <option value="moderate">ูุชูุณุท (2-5 ุณุงุนุช ุฏุฑ ููุชู)</option> <option value="high">ุฒุงุฏ (ุจุด ุงุฒ 5 ุณุงุนุช ุฏุฑ ููุชู)</option> </select>
          </div>
         </div>
         <div><label class="block text-sm font-semibold text-gray-700 mb-4">ุดุฑุงุท ุฎุงุต (ุงุฎุชุงุฑ)</label>
          <div class="grid md:grid-cols-2 gap-3"><label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="diabetes" class="condition-checkbox"> <span>ุฏุงุจุช</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="hypertension" class="condition-checkbox"> <span>ูุดุงุฑ ุฎูู ุจุงูุง</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="heart" class="condition-checkbox"> <span>ุจูุงุฑ ููุจ</span> </label> <label class="flex items-center space-x-3 space-x-reverse"> <input type="checkbox" value="pregnancy" class="condition-checkbox"> <span>ุจุงุฑุฏุงุฑ</span> </label>
          </div>
         </div><button type="submit" class="w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 transition-all"> ๐ก ุฏุฑุงูุช ุชูุตูโูุง </button>
        </form>
        <div id="health-tips-results" class="hidden mt-8"><!-- Health tips will be shown here -->
        </div>
       </div>
      </div><!-- Appointment Suggestion -->
      <div id="ai-feature-appointment-suggest" class="ai-feature-content hidden">
       <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
        <div class="text-center mb-8">
         <div class="text-6xl mb-4">
          ๐
         </div>
         <h3 class="text-2xl font-bold text-gray-800 mb-2">ูพุดููุงุฏ ุชุฎุตุต ููุงุณุจ</h3>
         <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุนูุงุฆู ุดูุงุ ููุงุณุจโุชุฑู ุชุฎุตุต ู ูพุฒุดฺฉ ุฑุง ูพุดููุงุฏ ูโุฏูู</p>
        </div>
        <form id="suggestionForm" class="space-y-6">
         <div><label for="suggestionSymptoms" class="block text-sm font-semibold text-gray-700 mb-2">ุนูุงุฆู ู ูุดฺฉู ุฎูุฏ ุฑุง ุดุฑุญ ุฏูุฏ</label> <textarea id="suggestionSymptoms" rows="4" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ูุซุงู: ุณุฑุฏุฑุฏ ูุฏุงููุ ุญุณุงุณุช ุจู ููุฑุ ุชููุน..."></textarea>
         </div>
         <div class="grid md:grid-cols-2 gap-6">
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุช ุฒูุงู</label> <select id="suggestionUrgency" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="routine">ูุนููู (ุชุง 2 ููุชู)</option> <option value="urgent">ููุฑ (ุชุง 3 ุฑูุฒ)</option> <option value="emergency">ุงูุฑฺุงูุณ (ููู ุงูุฑูุฒ)</option> </select>
          </div>
          <div><label class="block text-sm font-semibold text-gray-700 mb-2">ุณุงุจูู ูุฑุงุฌุนู</label> <select id="suggestionHistory" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="first">ุงููู ุจุงุฑ</option> <option value="followup">ูพฺฏุฑ ุฏุฑูุงู</option> <option value="second-opinion">ูุธุฑ ุฏูู</option> </select>
          </div>
         </div><button type="submit" class="w-full bg-purple-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-purple-700 transition-all"> ๐ฏ ุฏุฑุงูุช ูพุดููุงุฏ </button>
        </form>
        <div id="suggestion-results" class="hidden mt-8"><!-- Suggestions will be shown here -->
        </div>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Records Section -->
   <div id="records-section" class="section-content hidden">
    <div class="text-center mb-12">
     <h2 class="text-4xl font-bold text-gray-800 mb-4">๐ ุณูุงุจู ุจูุงุฑุงู</h2>
     <p class="text-xl text-gray-600">ูุดุงูุฏู ู ูุฏุฑุช ุณูุงุจู ูพุฒุดฺฉ</p>
    </div><!-- Search and Filter -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
     <div class="flex flex-wrap items-center gap-4"><select id="recordFilter" class="px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <option value="all">ููู ุณูุงุจู</option> <option value="appointment">ููุจุชโูุง</option> </select> <input type="text" id="searchRecords" placeholder="ุฌุณุชุฌู ุฏุฑ ุณูุงุจู..." class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"> <button onclick="filterRecords()" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all"> ๐ ุฌุณุชุฌู </button>
     </div>
    </div><!-- Records List -->
    <div id="records-list" class="space-y-6"><!-- Records will be loaded here -->
    </div>
   </div>
  </div><!-- Footer -->
  <footer class="bg-gray-900 text-white py-12 mt-16">
   <div class="container mx-auto px-6">
    <div class="text-center">
     <h3 class="text-2xl font-bold mb-4">ุฏุฑุจุงุฑู ุจูุงุฑุณุชุงู</h3>
     <div class="max-w-4xl mx-auto">
      <p class="text-lg mb-6">ุจูุงุฑุณุชุงู ูฺฉุงู ุจุง ุจุด ุงุฒ 30 ุณุงู ุชุฌุฑุจู ุฏุฑ ุงุฑุงุฆู ุฎุฏูุงุช ูพุฒุดฺฉุ ฺฉ ุงุฒ ูุนุชุจุฑุชุฑู ูุฑุงฺฉุฒ ุฏุฑูุงู ฺฉุดูุฑ ูุญุณูุจ ูโุดูุฏ.</p>
      <div class="grid md:grid-cols-3 gap-8 mt-8">
       <div>
        <h4 class="text-xl font-bold mb-3">๐ ุขุฏุฑุณ</h4>
        <p class="text-gray-300">ุชูุฑุงูุ ูพููฺฉุ ุฎุงุจุงู ุตุจุญุฏู<br>
         ุฏุงูุดฺฏุงู ุขุฒุงุฏ ูุงุญุฏ ุชูุฑุงู ูุฑฺฉุฒ</p>
       </div>
       <div>
        <h4 class="text-xl font-bold mb-3">๐ฉโโ๏ธ ูุฏุฑ ุนุงูู</h4>
        <p class="text-gray-300">ุณุฑฺฉุงุฑ ุฎุงูู ุฏฺฉุชุฑ ูุฑู ุญุงุฌ ุงุณูุนู</p>
       </div>
       <div>
        <h4 class="text-xl font-bold mb-3">๐ ุชูุงุณ</h4>
        <p class="text-gray-300">09016756070</p>
        <p class="text-gray-300">ุงูุฑฺุงูุณ: <span id="footer-emergency">115</span></p>
       </div>
      </div>
     </div>
     <div class="border-t border-gray-700 mt-8 pt-8">
      <p id="footer-text" class="text-gray-400">ุชูุงู ุญููู ูุญููุธ ุงุณุช - ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู</p>
     </div>
    </div>
   </div>
  </footer>
  <script>
        // Global variables
        let currentSection = 'home';
        let selectedSpecialty = null;
        let selectedDoctor = null;
        let selectedTime = null;
        let allRecords = [];
        let currentAIFeature = 'chat';
        let addedDrugs = [];

        // Default configuration
        const defaultConfig = {
            hospital_name: "ุจูุงุฑุณุชุงู ูฺฉุงู",
            system_title: "ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู",
            emergency_phone: "115",
            footer_text: "ุชูุงู ุญููู ูุญููุธ ุงุณุช - ุณุณุชู ูุฏุฑุช ุจูุงุฑุณุชุงู"
        };

        // Specialties and doctors data
        const specialtiesData = [
            {
                id: 'cardiology',
                name: 'ููุจ ู ุนุฑูู',
                icon: 'โค๏ธ',
                color: 'bg-red-50 border-red-200',
                description: 'ุชุดุฎุต ู ุฏุฑูุงู ุจูุงุฑโูุง ููุจ ู ุนุฑูู',
                doctors: [
                    { id: 'dr1', name: 'ุฏฺฉุชุฑ ุงุญูุฏ ูุญูุฏ', experience: '15 ุณุงู', rating: '4.9', specialty: 'ุฌุฑุงุญ ููุจ' },
                    { id: 'dr2', name: 'ุฏฺฉุชุฑ ูุงุทูู ุฑุถุง', experience: '12 ุณุงู', rating: '4.8', specialty: 'ููุจ ฺฉูุฏฺฉุงู' }
                ]
            },
            {
                id: 'neurology',
                name: 'ูุบุฒ ู ุงุนุตุงุจ',
                icon: '๐ง',
                color: 'bg-purple-50 border-purple-200',
                description: 'ุชุดุฎุต ู ุฏุฑูุงู ุงุฎุชูุงูุงุช ุณุณุชู ุนุตุจ',
                doctors: [
                    { id: 'dr3', name: 'ุฏฺฉุชุฑ ุนู ุญุณู', experience: '18 ุณุงู', rating: '4.9', specialty: 'ุตุฑุน ู ุชุดูุฌ' },
                    { id: 'dr4', name: 'ุฏฺฉุชุฑ ูุฑู ฺฉุฑู', experience: '10 ุณุงู', rating: '4.7', specialty: 'ุณุฑุฏุฑุฏ ู ูฺฏุฑู' }
                ]
            },
            {
                id: 'orthopedics',
                name: 'ุงุฑุชููพุฏ',
                icon: '๐ฆด',
                color: 'bg-blue-50 border-blue-200',
                description: 'ุฌุฑุงุญ ู ุฏุฑูุงู ุงุณุชุฎูุงู ู ููุงุตู',
                doctors: [
                    { id: 'dr5', name: 'ุฏฺฉุชุฑ ูุญุณู ุงุญูุฏ', experience: '20 ุณุงู', rating: '4.8', specialty: 'ุฌุฑุงุญ ุณุชูู ููุฑุงุช' },
                    { id: 'dr6', name: 'ุฏฺฉุชุฑ ุฒูุฑุง ููุณู', experience: '14 ุณุงู', rating: '4.9', specialty: 'ุงุฑุชููพุฏ ฺฉูุฏฺฉุงู' }
                ]
            },
            {
                id: 'dermatology',
                name: 'ูพูุณุช ู ูู',
                icon: '๐งด',
                color: 'bg-green-50 border-green-200',
                description: 'ุฏุฑูุงู ุจูุงุฑโูุง ูพูุณุชุ ูู ู ูุงุฎู',
                doctors: [
                    { id: 'dr7', name: 'ุฏฺฉุชุฑ ุณุงุฑุง ุฌุนูุฑ', experience: '8 ุณุงู', rating: '4.6', specialty: 'ูุฒุฑ ุฏุฑูุงู' },
                    { id: 'dr8', name: 'ุฏฺฉุชุฑ ุฑุถุง ููุฑ', experience: '16 ุณุงู', rating: '4.8', specialty: 'ุฌุฑุงุญ ูพูุณุช' }
                ]
            },
            {
                id: 'pediatrics',
                name: 'ฺฉูุฏฺฉุงู',
                icon: '๐ถ',
                color: 'bg-yellow-50 border-yellow-200',
                description: 'ูุฑุงูุจุชโูุง ูพุฒุดฺฉ ฺฉูุฏฺฉุงู ู ููุฌูุงูุงู',
                doctors: [
                    { id: 'dr9', name: 'ุฏฺฉุชุฑ ููุง ุตุงุฏู', experience: '13 ุณุงู', rating: '4.9', specialty: 'ุบุฏุฏ ฺฉูุฏฺฉุงู' },
                    { id: 'dr10', name: 'ุฏฺฉุชุฑ ุญุณู ูพูุฑ', experience: '11 ุณุงู', rating: '4.7', specialty: 'ุนููู ฺฉูุฏฺฉุงู' }
                ]
            },
            {
                id: 'gynecology',
                name: 'ุฒูุงู ู ุฒุงูุงู',
                icon: '๐ฉโโ๏ธ',
                color: 'bg-pink-50 border-pink-200',
                description: 'ูุฑุงูุจุชโูุง ุจูุฏุงุดุช ุฒูุงู ู ุฒุงูุงู',
                doctors: [
                    { id: 'dr11', name: 'ุฏฺฉุชุฑ ูุณุฑู ุจุงูุฑ', experience: '17 ุณุงู', rating: '4.8', specialty: 'ุฌุฑุงุญ ุฒูุงู' },
                    { id: 'dr12', name: 'ุฏฺฉุชุฑ ูููุงุฒ ุฑุญู', experience: '19 ุณุงู', rating: '4.9', specialty: 'ุฒุงูุงู ุทุจุน' }
                ]
            },
            {
                id: 'ophthalmology',
                name: 'ฺุดู ูพุฒุดฺฉ',
                icon: '๐๏ธ',
                color: 'bg-indigo-50 border-indigo-200',
                description: 'ุชุดุฎุต ู ุฏุฑูุงู ุจูุงุฑโูุง ฺุดู',
                doctors: [
                    { id: 'dr13', name: 'ุฏฺฉุชุฑ ุงูุฑ ุชูู', experience: '12 ุณุงู', rating: '4.7', specialty: 'ุฌุฑุงุญ ฺฉุงุชุงุฑุงฺฉุช' },
                    { id: 'dr14', name: 'ุฏฺฉุชุฑ ุดูุง ูุฑูุงุฏ', experience: '9 ุณุงู', rating: '4.6', specialty: 'ุดุจฺฉู ฺุดู' }
                ]
            },
            {
                id: 'ent',
                name: 'ฺฏูุด ู ุญูู ู ุจู',
                icon: '๐',
                color: 'bg-teal-50 border-teal-200',
                description: 'ุฏุฑูุงู ุงุฎุชูุงูุงุช ฺฏูุดุ ุญูู ู ุจู',
                doctors: [
                    { id: 'dr15', name: 'ุฏฺฉุชุฑ ฺฉุงูุฑุงู ุฒุงุฑุน', experience: '15 ุณุงู', rating: '4.8', specialty: 'ุฌุฑุงุญ ุจู' },
                    { id: 'dr16', name: 'ุฏฺฉุชุฑ ูุงุฒูู ูุฑุงุฏ', experience: '7 ุณุงู', rating: '4.5', specialty: 'ุงุฎุชูุงูุงุช ุดููุง' }
                ]
            },
            {
                id: 'psychiatry',
                name: 'ุฑูุงููพุฒุดฺฉ',
                icon: '๐ง',
                color: 'bg-gray-50 border-gray-200',
                description: 'ุฏุฑูุงู ุงุฎุชูุงูุงุช ุฑูุงู ู ุฑูุชุงุฑ',
                doctors: [
                    { id: 'dr17', name: 'ุฏฺฉุชุฑ ูุญูุฏ ุงูู', experience: '22 ุณุงู', rating: '4.9', specialty: 'ุงุถุทุฑุงุจ ู ุงูุณุฑุฏฺฏ' },
                    { id: 'dr18', name: 'ุฏฺฉุชุฑ ุงููุงู ุดุฑู', experience: '14 ุณุงู', rating: '4.8', specialty: 'ุฑูุงููพุฒุดฺฉ ฺฉูุฏฺฉ' }
                ]
            },
            {
                id: 'internal',
                name: 'ุฏุงุฎู',
                icon: '๐ฉบ',
                color: 'bg-orange-50 border-orange-200',
                description: 'ุชุดุฎุต ู ุฏุฑูุงู ุจูุงุฑโูุง ุฏุงุฎู',
                doctors: [
                    { id: 'dr19', name: 'ุฏฺฉุชุฑ ุญูุฏ ุงฺฉุจุฑ', experience: '25 ุณุงู', rating: '4.9', specialty: 'ุฏุงุจุช ู ุบุฏุฏ' },
                    { id: 'dr20', name: 'ุฏฺฉุชุฑ ุทุงูุฑู ูุณู', experience: '16 ุณุงู', rating: '4.7', specialty: 'ููุจ ู ุนุฑูู ุฏุงุฎู' }
                ]
            },
            {
                id: 'surgery',
                name: 'ุฌุฑุงุญ ุนููู',
                icon: 'โ๏ธ',
                color: 'bg-red-50 border-red-200',
                description: 'ุงูุฌุงู ุฌุฑุงุญโูุง ุนููู ู ุชุฎุตุต',
                doctors: [
                    { id: 'dr21', name: 'ุฏฺฉุชุฑ ุจูุฑูุฒ ูุงุณู', experience: '28 ุณุงู', rating: '4.9', specialty: 'ุฌุฑุงุญ ูุงูพุงุฑุงุณฺฉููพ' },
                    { id: 'dr22', name: 'ุฏฺฉุชุฑ ููุง ุฎูู', experience: '13 ุณุงู', rating: '4.8', specialty: 'ุฌุฑุงุญ ุนููู' }
                ]
            },
            {
                id: 'radiology',
                name: 'ุฑุงุฏูููฺ',
                icon: '๐ก',
                color: 'bg-blue-50 border-blue-200',
                description: 'ุชุตูุฑุจุฑุฏุงุฑ ูพุฒุดฺฉ ู ุชุดุฎุต',
                doctors: [
                    { id: 'dr23', name: 'ุฏฺฉุชุฑ ุณุนุฏ ููุฏู', experience: '18 ุณุงู', rating: '4.8', specialty: 'MRI ู CT Scan' },
                    { id: 'dr24', name: 'ุฏฺฉุชุฑ ูุฑุฏู ุงุณูุงุนู', experience: '11 ุณุงู', rating: '4.6', specialty: 'ุณูููฺฏุฑุงู' }
                ]
            }
        ];

        // Time slots
        const timeSlots = [
            '08:00', '08:30', '09:00', '09:30', '10:00', '10:30',
            '11:00', '11:30', '14:00', '14:30', '15:00', '15:30',
            '16:00', '16:30', '17:00', '17:30', '18:00', '18:30'
        ];

        // Symptoms database
        const symptomsDatabase = [
            { id: 'headache', name: 'ุณุฑุฏุฑุฏ', category: 'neurological' },
            { id: 'fever', name: 'ุชุจ', category: 'general' },
            { id: 'cough', name: 'ุณุฑูู', category: 'respiratory' },
            { id: 'nausea', name: 'ุชููุน', category: 'digestive' },
            { id: 'fatigue', name: 'ุฎุณุชฺฏ', category: 'general' },
            { id: 'joint-pain', name: 'ุฏุฑุฏ ููุงุตู', category: 'musculoskeletal' },
            { id: 'chest-pain', name: 'ุฏุฑุฏ ููุณู ุณูู', category: 'cardiac' },
            { id: 'shortness-breath', name: 'ุชูฺฏ ููุณ', category: 'respiratory' },
            { id: 'dizziness', name: 'ุณุฑฺฏุฌู', category: 'neurological' },
            { id: 'stomach-pain', name: 'ุฏุฑุฏ ุดฺฉู', category: 'digestive' },
            { id: 'back-pain', name: 'ฺฉูุฑุฏุฑุฏ', category: 'musculoskeletal' },
            { id: 'sore-throat', name: 'ฺฏููุฏุฑุฏ', category: 'respiratory' }
        ];

        // Drug interactions database
        const drugInteractions = {
            'ูุงุฑูุงุฑู': ['ุขุณูพุฑู', 'ุงุจููพุฑููู', 'ุขูุชโุจูุชฺฉโูุง'],
            'ุขุณูพุฑู': ['ูุงุฑูุงุฑู', 'ูุชููุฑูู'],
            'ุงุจููพุฑููู': ['ูุงุฑูุงุฑู', 'ูุฒูููพุฑู'],
            'ูุชููุฑูู': ['ุขุณูพุฑู', 'ููุฑูุณูุงุฏ'],
            'ูุฒูููพุฑู': ['ุงุจููพุฑููู', 'ุงุณูพุฑููููุงฺฉุชูู']
        };

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                allRecords = data;
                updateStats();
                renderRecords();
            }
        };

        // Initialize SDKs
        async function initializeSDKs() {
            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error("Failed to initialize data SDK");
                }
            }

            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('system-title').textContent = config.system_title || defaultConfig.system_title;
                        document.getElementById('hospital-name').textContent = config.hospital_name || defaultConfig.hospital_name;
                        document.getElementById('emergency-phone').textContent = config.emergency_phone || defaultConfig.emergency_phone;
                        document.getElementById('emergency-display').textContent = config.emergency_phone || defaultConfig.emergency_phone;
                        document.getElementById('footer-emergency').textContent = config.emergency_phone || defaultConfig.emergency_phone;
                        document.getElementById('emergency-consultation').textContent = config.emergency_phone || defaultConfig.emergency_phone;
                        document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["hospital_name", config.hospital_name || defaultConfig.hospital_name],
                        ["system_title", config.system_title || defaultConfig.system_title],
                        ["emergency_phone", config.emergency_phone || defaultConfig.emergency_phone],
                        ["footer_text", config.footer_text || defaultConfig.footer_text]
                    ])
                });
            }
        }

        // Update time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('fa-IR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }

        // Update stats
        function updateStats() {
            document.getElementById('total-records').textContent = allRecords.length;
        }

        // AI Consultation responses database
        const aiResponses = {
            'ุณุฑุฏุฑุฏ': {
                response: `ุณุฑุฏุฑุฏ ูโุชูุงูุฏ ุนูู ูุฎุชูู ุฏุงุดุชู ุจุงุดุฏ:

๐น **ุงููุงุน ุณุฑุฏุฑุฏ:**
โข ุณุฑุฏุฑุฏ ุชูุด: ุดุงุนโุชุฑู ููุนุ ูุนูููุงู ูุงุด ุงุฒ ุงุณุชุฑุณ
โข ูฺฏุฑู: ุณุฑุฏุฑุฏ ุดุฏุฏ ููุฑุงู ุจุง ุญุณุงุณุช ุจู ููุฑ
โข ุณุฑุฏุฑุฏ ุฎูุดูโุง: ุฏุฑุฏ ุดุฏุฏ ฺฉ ุทุฑูู

๐น **ุนูู ุงุญุชูุงู:**
โข ฺฉูโุขุจ ุจุฏู
โข ฺฉูุจูุฏ ุฎูุงุจ
โข ุงุณุชุฑุณ ู ุงุถุทุฑุงุจ
โข ูุดฺฉูุงุช ุจูุง
โข ุชุบุฑุงุช ููุฑููู

๐น **ุชูุตูโูุง ุงููู:**
โข ุขุจ ฺฉุงู ุจููุดุฏ
โข ุงุณุชุฑุงุญุช ฺฉูุฏ
โข ฺฉููพุฑุณ ุณุฑุฏ ุฑู ูพุดุงู
โข ูุงุณุงฺ ููุงู ฺฏุฑุฏู ู ุดููู

โ๏ธ **ูุฑุงุฌุนู ููุฑ ุฏุฑ ุตูุฑุช:**
โข ุณุฑุฏุฑุฏ ูุงฺฏูุงู ู ุดุฏุฏ
โข ููุฑุงู ุจุง ุชุจ ุจุงูุง
โข ุงุฎุชูุงู ุฏุฑ ุจูุง ุง ุตุญุจุช`,
                followUp: ['ุฏุฑุฏ ุดุฏุช ุฏุงุฑุฏุ', 'ฺูุฏ ููุช ุงุณุช ุงู ูุดฺฉู ุฏุงุฑุฏุ', 'ุนูุงุฆู ุฏฺฏุฑ ูู ุฏุงุฑุฏุ']
            },
            'ุชุจ': {
                response: `ุชุจ ูุดุงููโุง ุงุฒ ููุงููุช ุจุฏู ุฏุฑ ุจุฑุงุจุฑ ุนูููุช ุงุณุช:

๐น **ุฏุฑุฌูโุจูุฏ ุชุจ:**
โข ุชุจ ุฎูู: 37.5-38ยฐC
โข ุชุจ ูุชูุณุท: 38-39ยฐC  
โข ุชุจ ุจุงูุง: ุจุงูุง 39ยฐC

๐น **ุนูู ุดุงุน:**
โข ุนูููุชโูุง ูุฑูุณ (ุณุฑูุงุฎูุฑุฏฺฏุ ุขููููุงูุฒุง)
โข ุนูููุชโูุง ุจุงฺฉุชุฑุง
โข ุงูุชูุงุจุงุช
โข ูุงฺฉูุด ุจู ุฏุงุฑู

๐น **ูุฑุงูุจุช ุฏุฑ ููุฒู:**
โข ุขุจ ู ูุงุนุงุช ฺฉุงู ุจููุดุฏ
โข ุงุณุชุฑุงุญุช ฺฉุงูู
โข ูุจุงุณโูุง ุณุจฺฉ ุจูพูุดุฏ
โข ฺฉููพุฑุณ ููุฑู ุฑู ูพุดุงู

๐น **ุฏุงุฑููุง ุชุจโุจุฑ:**
โข ุงุณุชุงููููู (ูุทุงุจู ุฏุณุชูุฑ)
โข ุงุจููพุฑููู (ุจุฑุง ุจุงูุบู)

โ๏ธ **ูุฑุงุฌุนู ููุฑ ุงฺฏุฑ:**
โข ุชุจ ุจุงูุง 39.5ยฐC
โข ุชุดูุฌ
โข ุชูฺฏ ููุณ ุดุฏุฏ
โข ฺฉุงูุด ููุดุงุฑ`,
                followUp: ['ุชุจ ฺูุฏุฑ ุงุณุชุ', 'ุนูุงุฆู ุฏฺฏุฑ ุฏุงุฑุฏุ', 'ฺู ูุฏุช ุงุณุช ุชุจ ุฏุงุฑุฏุ']
            },
            'ุณุฑูู': {
                response: `ุณุฑูู ูฺฉุงูุฒู ุฏูุงุน ุจุฏู ุจุฑุง ูพุงฺฉุณุงุฒ ุฑุงูโูุง ุชููุณ ุงุณุช:

๐น **ุงููุงุน ุณุฑูู:**
โข ุณุฑูู ุฎุดฺฉ: ุจุฏูู ุฎูุท
โข ุณุฑูู ูููุฏ: ููุฑุงู ุจุง ุฎูุท
โข ุณุฑูู ูุฒูู: ุจุด ุงุฒ 8 ููุชู

๐น **ุนูู ุดุงุน:**
โข ุนูููุชโูุง ุชููุณ
โข ุขูุฑฺ
โข ุฑููุงฺฉุณ ูุนุฏู
โข ุขุณู
โข ูุตุฑู ุจุฑุฎ ุฏุงุฑููุง

๐น **ุฏุฑูุงู ุฎุงูฺฏ:**
โข ุนุณู (ุจุฑุง ุจุงูุง 1 ุณุงู)
โข ุขุจ ฺฏุฑู ุจุง ููู
โข ุจุฎูุฑ ุขุจ ฺฏุฑู
โข ูุงุนุงุช ฺฏุฑู ูุฑุงูุงู

๐น **ูพุดฺฏุฑ:**
โข ุฏุณุชโูุง ุฑุง ุจุดูุฏ
โข ุงุฒ ุฏูุฏ ู ุขููุฏฺฏ ุฏูุฑ ฺฉูุฏ
โข ูุงุณฺฉ ุฏุฑ ูุญุทโูุง ุขููุฏู

โ๏ธ **ูุฑุงุฌุนู ููุฑ ุงฺฏุฑ:**
โข ุฎูุท ุฎูู
โข ุชูฺฏ ููุณ ุดุฏุฏ
โข ุชุจ ุจุงูุง ููุฑุงู ุณุฑูู
โข ุณุฑูู ุจุด ุงุฒ 2 ููุชู`,
                followUp: ['ุณุฑูู ุฎุดฺฉ ุงุณุช ุง ุฎูุท ุฏุงุฑุ', 'ฺู ูุฏุช ุงุณุช ุณุฑูู ุฏุงุฑุฏุ', 'ุชุจ ูู ุฏุงุฑุฏุ']
            },
            'ุฏุฑุฏ ุดฺฉู': {
                response: `ุฏุฑุฏ ุดฺฉู ูโุชูุงูุฏ ุนูู ูุฎุชูู ุฏุงุดุชู ุจุงุดุฏ:

๐น **ูุญู ุฏุฑุฏ:**
โข ุจุงูุง ุดฺฉู: ูุนุฏูุ ฺฉุจุฏุ ฺฉุณู ุตูุฑุงุก
โข ูุณุท ุดฺฉู: ุฑูุฏู ฺฉูฺฺฉ
โข ูพุงู ุดฺฉู: ุฑูุฏู ุจุฒุฑฺฏุ ุขูพุงูุฏุณ

๐น **ุนูู ุดุงุน:**
โข ุณูุก ูุงุถูู
โข ฺฏุงุฒ ูุนุฏู
โข ุนูููุช ูุนุฏู
โข ุงุณุชุฑุณ
โข ูุณูููุช ุบุฐุง

๐น **ูุฑุงูุจุช ุงููู:**
โข ูุงุนุงุช ฺฉุงู ุจููุดุฏ
โข ุบุฐุงูุง ุณุจฺฉ ูุตุฑู ฺฉูุฏ
โข ฺฉููพุฑุณ ฺฏุฑู ุฑู ุดฺฉู
โข ุงุณุชุฑุงุญุช ฺฉูุฏ

๐น **ุงุฌุชูุงุจ ุงุฒ:**
โข ุบุฐุงูุง ฺุฑุจ ู ุชูุฏ
โข ููุดุฏูโูุง ฺฏุงุฒุฏุงุฑ
โข ูุณฺฉูโูุง ูู

โ๏ธ **ุงูุฑฺุงูุณ ููุฑ:**
โข ุฏุฑุฏ ุดุฏุฏ ู ูุงฺฏูุงู
โข ุงุณุชูุฑุงุบ ูุฏุงูู
โข ุชุจ ุจุงูุง
โข ุฎููุฑุฒ
โข ุณูุช ุดฺฉู`,
                followUp: ['ุฏุฑุฏ ฺฉุฌุง ุดฺฉู ุงุณุชุ', 'ฺู ูุฏุช ุงุณุช ุฏุฑุฏ ุฏุงุฑุฏุ', 'ุงุณุชูุฑุงุบ ูู ุฏุงุฑุฏุ']
            },
            'ุฎุณุชฺฏ': {
                response: `ุฎุณุชฺฏ ูุฏุงูู ูโุชูุงูุฏ ูุดุงูู ูุดฺฉูุงุช ูุฎุชูู ุจุงุดุฏ:

๐น **ุนูู ุดุงุน:**
โข ฺฉูุจูุฏ ุฎูุงุจ
โข ุงุณุชุฑุณ ูุฒูู
โข ฺฉูโุฎูู
โข ูุดฺฉูุงุช ุชุฑูุฆุฏ
โข ุฏุงุจุช
โข ุงูุณุฑุฏฺฏ

๐น **ุจูุจูุฏ ุงูุฑฺ:**
โข ุฎูุงุจ ููุธู 7-8 ุณุงุนุช
โข ูุฑุฒุด ููุธู
โข ุชุบุฐู ูุชุนุงุฏู
โข ูุฏุฑุช ุงุณุชุฑุณ
โข ุขุจ ฺฉุงู ุจููุดุฏ

๐น **ุชุบุฐู ููุงุณุจ:**
โข ุตุจุญุงูู ููู
โข ููู ู ุณุจุฒุฌุงุช
โข ูพุฑูุชุฆู ฺฉุงู
โข ุงุฌุชูุงุจ ุงุฒ ููุฏ ุฒุงุฏ

๐น **ุณุจฺฉ ุฒูุฏฺฏ:**
โข ุจุฑูุงููโุฑุฒ ฺฉุงุฑ
โข ุงุณุชุฑุงุญุชโูุง ฺฉูุชุงู
โข ุชฺฉูฺฉโูุง ุขุฑุงูุด

โ๏ธ **ูุฑุงุฌุนู ูพุฒุดฺฉ ุงฺฏุฑ:**
โข ุฎุณุชฺฏ ุจุด ุงุฒ 2 ููุชู
โข ฺฉุงูุด ูุฒู ุบุฑุทุจุน
โข ุชุจ ูุฏุงูู
โข ุชูฺฏ ููุณ`,
                followUp: ['ฺู ูุฏุช ุงุณุช ุฎุณุชฺฏ ุฏุงุฑุฏุ', 'ุฎูุงุจ ุดูุง ฺุทูุฑ ุงุณุชุ', 'ุนูุงุฆู ุฏฺฏุฑ ุฏุงุฑุฏุ']
            },
            'ุฏุฑุฏ ููุงุตู': {
                response: `ุฏุฑุฏ ููุงุตู ูุดฺฉู ุดุงุน ุงุณุช ฺฉู ุนูู ูุฎุชูู ุฏุงุฑุฏ:

๐น **ุนูู ุงุตู:**
โข ุขุฑุชุฑูุฒ (ูุฑุณุงุด ููุตู)
โข ุขุฑุชุฑุช ุฑููุงุชูุฆุฏ
โข ููุฑุณ
โข ุขุณุจ ูุฑุฒุด
โข ุงูุชูุงุจ

๐น **ูุฑุงูุจุช ุฎุงูฺฏ:**
โข ุงุณุชุฑุงุญุช ููุตู ุขุณุจโุฏุฏู
โข ฺฉููพุฑุณ ุณุฑุฏ (24 ุณุงุนุช ุงูู)
โข ฺฉููพุฑุณ ฺฏุฑู (ุจุนุฏ ุงุฒ 24 ุณุงุนุช)
โข ุญุฑฺฉุงุช ููุงู

๐น **ูุฑุฒุด ููุงุณุจ:**
โข ุดูุง
โข ูพุงุฏูโุฑู
โข ูฺฏุง
โข ฺฉุดุด ุนุถูุงุช

๐น **ูพุดฺฏุฑ:**
โข ุญูุธ ูุฒู ููุงุณุจ
โข ูุฑุฒุด ููุธู
โข ุชููุช ุนุถูุงุช
โข ูุถุนุช ุตุญุญ ุจุฏู

โ๏ธ **ูุฑุงุฌุนู ููุฑ ุงฺฏุฑ:**
โข ุฏุฑุฏ ุดุฏุฏ ู ูุงฺฏูุงู
โข ุชูุฑู ู ูุฑูุฒ
โข ูุญุฏูุฏุช ุญุฑฺฉุช
โข ุชุจ ููุฑุงู ุฏุฑุฏ`,
                followUp: ['ฺฉุฏุงู ููุตู ุฏุฑุฏ ูโฺฉูุฏุ', 'ุฏุฑุฏ ฺู ูููุน ุจุฏุชุฑ ูโุดูุฏุ', 'ุชูุฑู ูู ุฏุงุฑุฏุ']
            }
        };

        // Show section
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.className = 'tab-inactive px-6 py-4 font-semibold rounded-lg transition-all';
            });

            // Show selected section
            document.getElementById(`${sectionName}-section`).classList.remove('hidden');
            document.getElementById(`tab-${sectionName}`).className = 'tab-active px-6 py-4 font-semibold rounded-lg transition-all';

            currentSection = sectionName;

            // Load content based on section
            if (sectionName === 'clinics') {
                loadClinics();
            } else if (sectionName === 'appointments') {
                loadSpecialtySelection();
            } else if (sectionName === 'records') {
                renderRecords();
            } else if (sectionName === 'ai-consultation') {
                initializeChat();
            }
        }

        // Load clinics
        function loadClinics() {
            const grid = document.getElementById('clinics-grid');
            grid.innerHTML = specialtiesData.map(specialty => `
                <div class="card-hover bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="p-6">
                        <div class="flex items-center mb-4">
                            <div class="text-4xl ml-4">${specialty.icon}</div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">${specialty.name}</h3>
                                <p class="text-gray-600 text-sm">${specialty.description}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <h4 class="font-semibold text-gray-700">ูพุฒุดฺฉุงู:</h4>
                            ${specialty.doctors.map(doctor => `
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <div>
                                        <div class="font-medium text-gray-800">${doctor.name}</div>
                                        <div class="text-sm text-gray-600">${doctor.specialty}</div>
                                        <div class="text-xs text-gray-500">${doctor.experience} ุชุฌุฑุจู</div>
                                    </div>
                                    <div class="text-left">
                                        <div class="flex items-center">
                                            <span class="text-yellow-500">โญ</span>
                                            <span class="text-sm text-gray-600 mr-1">${doctor.rating}</span>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <button onclick="bookWithSpecialty('${specialty.id}')" 
                                class="w-full mt-4 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all">
                            ๐ ุฑุฒุฑู ููุจุช
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Book with specialty
        function bookWithSpecialty(specialtyId) {
            showSection('appointments');
            setTimeout(() => {
                selectSpecialty(specialtyId);
            }, 100);
        }

        // Load specialty selection
        function loadSpecialtySelection() {
            const grid = document.getElementById('specialty-selection');
            grid.innerHTML = specialtiesData.map(specialty => `
                <div class="specialty-card ${specialty.color} border-2 rounded-xl p-6 text-center" 
                     onclick="selectSpecialty('${specialty.id}')">
                    <div class="text-4xl mb-3">${specialty.icon}</div>
                    <h4 class="font-bold text-gray-800 mb-2">${specialty.name}</h4>
                    <p class="text-sm text-gray-600">${specialty.doctors.length} ูพุฒุดฺฉ</p>
                </div>
            `).join('');
        }

        // Select specialty
        function selectSpecialty(specialtyId) {
            selectedSpecialty = specialtyId;
            
            // Update UI
            document.querySelectorAll('.specialty-card').forEach(card => {
                card.classList.remove('specialty-selected');
            });
            
            const selectedCard = document.querySelector(`[onclick="selectSpecialty('${specialtyId}')"]`);
            if (selectedCard) {
                selectedCard.classList.add('specialty-selected');
            }

            // Load doctors
            loadDoctorSelection(specialtyId);
            document.getElementById('step-doctor').classList.remove('hidden');
            
            // Scroll to doctor selection
            document.getElementById('step-doctor').scrollIntoView({ behavior: 'smooth' });
        }

        // Load doctor selection
        function loadDoctorSelection(specialtyId) {
            const specialty = specialtiesData.find(s => s.id === specialtyId);
            const grid = document.getElementById('doctor-selection');
            
            grid.innerHTML = specialty.doctors.map(doctor => `
                <div class="card-hover bg-white border-2 border-gray-200 rounded-xl p-6 cursor-pointer" 
                     onclick="selectDoctor('${doctor.id}', '${doctor.name}')">
                    <div class="flex items-center space-x-4 space-x-reverse">
                        <div class="text-4xl">๐จโโ๏ธ</div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 text-lg">${doctor.name}</h4>
                            <p class="text-gray-600 mb-1">${doctor.specialty}</p>
                            <p class="text-sm text-gray-500">${doctor.experience} ุชุฌุฑุจู</p>
                            <div class="flex items-center mt-2">
                                <span class="text-yellow-500">โญ</span>
                                <span class="text-sm text-gray-600 mr-1">${doctor.rating}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Select doctor
        function selectDoctor(doctorId, doctorName) {
            selectedDoctor = { id: doctorId, name: doctorName };
            
            // Update UI
            document.querySelectorAll('#doctor-selection .card-hover').forEach(card => {
                card.classList.remove('specialty-selected');
            });
            event.target.closest('.card-hover').classList.add('specialty-selected');

            // Show form
            document.getElementById('step-form').classList.remove('hidden');
            loadTimeSlots();
            
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('appointmentDate').min = today;
            
            // Scroll to form
            document.getElementById('step-form').scrollIntoView({ behavior: 'smooth' });
        }

        // Load time slots
        function loadTimeSlots() {
            const grid = document.getElementById('time-slots');
            grid.innerHTML = timeSlots.map(time => `
                <button type="button" class="px-4 py-3 border-2 border-gray-300 rounded-lg text-sm font-semibold hover:bg-blue-50 transition-all" 
                        onclick="selectTime('${time}')">
                    ${time}
                </button>
            `).join('');
        }

        // Select time
        function selectTime(time) {
            selectedTime = time;
            
            // Update UI
            document.querySelectorAll('#time-slots button').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('border-gray-300');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
            event.target.classList.remove('border-gray-300');
        }

        // Book appointment
        async function bookAppointment(event) {
            event.preventDefault();

            if (!selectedSpecialty || !selectedDoctor || !selectedTime) {
                showToast('ูุทูุงู ุชูุงู ูุฑุงุญู ุฑุง ุชฺฉูู ฺฉูุฏ', 'error');
                return;
            }

            if (allRecords.length >= 999) {
                showToast('ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุฑฺฉูุฑุฏ (999) ุจู ุญุฏ ูุตุงุจ ุฑุณุฏู ุงุณุช. ูุทูุงู ุงุจุชุฏุง ุจุฑุฎ ุฑฺฉูุฑุฏูุง ุฑุง ุญุฐู ฺฉูุฏ.', 'error');
                return;
            }

            const formData = new FormData(event.target);
            const btn = document.getElementById('bookAppointmentBtn');
            
            btn.disabled = true;
            btn.innerHTML = '<div class="loading-spinner ml-2"></div> ุฏุฑ ุญุงู ุฑุฒุฑู...';

            const specialty = specialtiesData.find(s => s.id === selectedSpecialty);
            const appointmentData = {
                patient_id: `A-${Date.now()}`,
                name: formData.get('patientName'),
                age: formData.get('patientAge'),
                phone: formData.get('patientPhone'),
                specialty: specialty.name,
                doctor: selectedDoctor.name,
                appointment_date: formData.get('appointmentDate'),
                appointment_time: selectedTime,
                symptoms: formData.get('appointmentSymptoms') || 'ุฐฺฉุฑ ูุดุฏู',
                type: 'appointment',
                status: 'ุฑุฒุฑู ุดุฏู',
                timestamp: new Date().toISOString()
            };

            try {
                if (window.dataSdk) {
                    const result = await window.dataSdk.create(appointmentData);
                    if (result.isOk) {
                        showToast('โ ููุจุช ุจุง ููููุช ุฑุฒุฑู ุดุฏ!', 'success');
                        resetAppointment();
                    } else {
                        showToast('ุฎุทุง ุฏุฑ ุฑุฒุฑู ููุจุช', 'error');
                    }
                } else {
                    showToast('ููุจุช ุฑุฒุฑู ุดุฏ (ุญุงูุช ููุงุด)', 'success');
                    resetAppointment();
                }
            } catch (error) {
                showToast('ุฎุทุง ุฏุฑ ุฑุฒุฑู ููุจุช', 'error');
            }

            btn.disabled = false;
            btn.innerHTML = 'โ ุชุงุฏ ู ุฑุฒุฑู ููุจุช';
        }

        // Reset appointment
        function resetAppointment() {
            document.getElementById('appointmentForm').reset();
            document.getElementById('step-doctor').classList.add('hidden');
            document.getElementById('step-form').classList.add('hidden');
            
            selectedSpecialty = null;
            selectedDoctor = null;
            selectedTime = null;
            
            document.querySelectorAll('.specialty-selected').forEach(el => {
                el.classList.remove('specialty-selected');
            });
            
            // Scroll back to top
            document.getElementById('step-specialty').scrollIntoView({ behavior: 'smooth' });
        }

        // Render records
        function renderRecords() {
            const recordsList = document.getElementById('records-list');
            
            if (allRecords.length === 0) {
                recordsList.innerHTML = `
                    <div class="text-center py-16">
                        <div class="text-6xl mb-4">๐</div>
                        <h3 class="text-2xl font-bold text-gray-600 mb-2">ูููุฒ ุณุงุจููโุง ุซุจุช ูุดุฏู</h3>
                        <p class="text-gray-500">ูพุณ ุงุฒ ุฑุฒุฑู ููุจุชุ ุณูุงุจู ุดูุง ุฏุฑ ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ</p>
                    </div>
                `;
                return;
            }

            const sortedRecords = allRecords.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            recordsList.innerHTML = sortedRecords.map(record => `
                <div class="slide-in bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-500">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-1">${record.name}</h4>
                            <p class="text-gray-600">ุณู: ${record.age} ุณุงู | ุดูุงุณู: ${record.patient_id}</p>
                        </div>
                        <div class="text-left">
                            <span class="inline-block px-4 py-2 text-sm font-semibold rounded-full bg-blue-100 text-blue-800">
                                ๐ ููุจุช
                            </span>
                            <p class="text-sm text-gray-500 mt-2">${new Date(record.timestamp).toLocaleString('fa-IR')}</p>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-4">
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชุฎุตุต:</span>
                                <span class="text-gray-800">${record.specialty}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ูพุฒุดฺฉ:</span>
                                <span class="text-gray-800">${record.doctor}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชุงุฑุฎ:</span>
                                <span class="text-gray-800">${record.appointment_date}</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุณุงุนุช:</span>
                                <span class="text-gray-800">${record.appointment_time}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชููู:</span>
                                <span class="text-gray-800">${record.phone}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ูุถุนุช:</span>
                                <span class="inline-block px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">${record.status}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-4">
                        <span class="font-semibold text-gray-700">ุนูุช ูุฑุงุฌุนู:</span>
                        <p class="text-gray-800 mt-1">${record.symptoms}</p>
                    </div>
                    
                    <div class="flex justify-end">
                        <button onclick="deleteRecord('${record.__backendId}')" 
                                class="text-red-600 hover:text-red-800 font-semibold px-4 py-2 rounded-lg hover:bg-red-50 transition-all">
                            ๐๏ธ ุญุฐู ุฑฺฉูุฑุฏ
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Delete record
        async function deleteRecord(backendId) {
            const record = allRecords.find(r => r.__backendId === backendId);
            if (!record || !window.dataSdk) return;

            try {
                const result = await window.dataSdk.delete(record);
                if (result.isOk) {
                    showToast('ุฑฺฉูุฑุฏ ุจุง ููููุช ุญุฐู ุดุฏ', 'success');
                } else {
                    showToast('ุฎุทุง ุฏุฑ ุญุฐู ุฑฺฉูุฑุฏ', 'error');
                }
            } catch (error) {
                showToast('ุฎุทุง ุฏุฑ ุญุฐู ุฑฺฉูุฑุฏ', 'error');
            }
        }

        // Filter records
        function filterRecords() {
            const filter = document.getElementById('recordFilter').value;
            const search = document.getElementById('searchRecords').value.toLowerCase();
            
            let filteredRecords = allRecords;
            
            if (filter !== 'all') {
                filteredRecords = filteredRecords.filter(record => record.type === filter);
            }
            
            if (search) {
                filteredRecords = filteredRecords.filter(record => 
                    record.name.toLowerCase().includes(search) ||
                    record.symptoms.toLowerCase().includes(search) ||
                    (record.specialty && record.specialty.toLowerCase().includes(search)) ||
                    (record.doctor && record.doctor.toLowerCase().includes(search))
                );
            }
            
            const recordsList = document.getElementById('records-list');
            if (filteredRecords.length === 0) {
                recordsList.innerHTML = `
                    <div class="text-center py-16">
                        <div class="text-6xl mb-4">๐</div>
                        <h3 class="text-2xl font-bold text-gray-600 mb-2">ูุชุฌูโุง ุงูุช ูุดุฏ</h3>
                        <p class="text-gray-500">ูุทูุงู ฺฉููุงุช ฺฉูุฏ ุฏฺฏุฑ ุงูุชุญุงู ฺฉูุฏ</p>
                    </div>
                `;
                return;
            }
            
            // Re-render with filtered records
            const sortedRecords = filteredRecords.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            recordsList.innerHTML = sortedRecords.map(record => `
                <div class="slide-in bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-500">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-1">${record.name}</h4>
                            <p class="text-gray-600">ุณู: ${record.age} ุณุงู | ุดูุงุณู: ${record.patient_id}</p>
                        </div>
                        <div class="text-left">
                            <span class="inline-block px-4 py-2 text-sm font-semibold rounded-full bg-blue-100 text-blue-800">
                                ๐ ููุจุช
                            </span>
                            <p class="text-sm text-gray-500 mt-2">${new Date(record.timestamp).toLocaleString('fa-IR')}</p>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-4">
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชุฎุตุต:</span>
                                <span class="text-gray-800">${record.specialty}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ูพุฒุดฺฉ:</span>
                                <span class="text-gray-800">${record.doctor}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชุงุฑุฎ:</span>
                                <span class="text-gray-800">${record.appointment_date}</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุณุงุนุช:</span>
                                <span class="text-gray-800">${record.appointment_time}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ุชููู:</span>
                                <span class="text-gray-800">${record.phone}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="font-semibold text-gray-700 ml-2">ูุถุนุช:</span>
                                <span class="inline-block px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">${record.status}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-4">
                        <span class="font-semibold text-gray-700">ุนูุช ูุฑุงุฌุนู:</span>
                        <p class="text-gray-800 mt-1">${record.symptoms}</p>
                    </div>
                    
                    <div class="flex justify-end">
                        <button onclick="deleteRecord('${record.__backendId}')" 
                                class="text-red-600 hover:text-red-800 font-semibold px-4 py-2 rounded-lg hover:bg-red-50 transition-all">
                            ๐๏ธ ุญุฐู ุฑฺฉูุฑุฏ
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Show toast message
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-6 left-6 px-6 py-4 rounded-lg text-white z-50 font-semibold shadow-lg ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 'bg-blue-600'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 4000);
        }

        // Initialize chat
        function initializeChat() {
            const chatMessages = document.getElementById('chat-messages');
            // Reset to initial message if needed
            if (chatMessages.children.length === 1) {
                // Chat is already initialized
                return;
            }
        }

        // Quick consultation
        function quickConsultation(topic) {
            const userMessage = `ุณูุงู ุฏุฑุจุงุฑู ${topic}`;
            addUserMessage(userMessage);
            
            setTimeout(() => {
                if (aiResponses[topic]) {
                    addAIMessage(aiResponses[topic].response);
                    
                    // Add follow-up questions
                    setTimeout(() => {
                        addFollowUpQuestions(aiResponses[topic].followUp);
                    }, 1000);
                } else {
                    addAIMessage('ูุชุฃุณูุงูู ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู ุงู ููุถูุน ุฏุฑ ุฏุณุชุฑุณ ูุณุช. ูุทูุงู ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ.');
                }
            }, 1000);
        }

        // Send message
        function sendMessage(event) {
            event.preventDefault();
            
            const messageInput = document.getElementById('userMessage');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            addUserMessage(message);
            messageInput.value = '';
            
            // Simulate AI thinking
            const btn = document.getElementById('sendMessageBtn');
            btn.disabled = true;
            btn.innerHTML = '<div class="loading-spinner ml-2"></div> ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด...';
            
            setTimeout(() => {
                processAIResponse(message);
                btn.disabled = false;
                btn.innerHTML = '๐ค ุงุฑุณุงู';
            }, 2000);
        }

        // Add user message
        function addUserMessage(message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3 space-x-reverse mb-4 justify-end';
            messageDiv.innerHTML = `
                <div class="bg-blue-600 text-white rounded-lg p-4 shadow-sm max-w-md">
                    <p>${message}</p>
                </div>
                <div class="text-2xl">๐ค</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Add AI message
        function addAIMessage(message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3 space-x-reverse mb-4';
            messageDiv.innerHTML = `
                <div class="text-2xl">๐ค</div>
                <div class="bg-white rounded-lg p-4 shadow-sm max-w-md">
                    <p class="whitespace-pre-line">${message}</p>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Add follow-up questions
        function addFollowUpQuestions(questions) {
            const chatMessages = document.getElementById('chat-messages');
            const questionsDiv = document.createElement('div');
            questionsDiv.className = 'flex items-start space-x-3 space-x-reverse mb-4';
            questionsDiv.innerHTML = `
                <div class="text-2xl">๐ค</div>
                <div class="bg-gray-100 rounded-lg p-4 shadow-sm max-w-md">
                    <p class="text-sm text-gray-600 mb-3">ุณูุงูุงุช ุชฺฉูู:</p>
                    <div class="space-y-2">
                        ${questions.map(q => `
                            <button onclick="quickAnswer('${q}')" 
                                    class="block w-full text-right text-sm bg-white hover:bg-blue-50 border border-gray-200 rounded-lg p-2 transition-all">
                                ${q}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
            chatMessages.appendChild(questionsDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Quick answer
        function quickAnswer(question) {
            addUserMessage(question);
            
            setTimeout(() => {
                let response = 'ุจุฑ ุงุณุงุณ ูพุงุณุฎ ุดูุงุ ';
                
                if (question.includes('ุดุฏุช') || question.includes('ุดุฏุฏ')) {
                    response += 'ุงฺฏุฑ ุฏุฑุฏ ุง ุนูุงุฆู ุดุฏุฏ ุงุณุชุ ุชูุตู ูโฺฉูู ูุฑ ฺู ุณุฑุนโุชุฑ ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ. ุฏุฑ ุบุฑ ุงู ุตูุฑุช ูโุชูุงูุฏ ุงุฒ ุฑูุดโูุง ุฎุงูฺฏ ุงุณุชูุงุฏู ฺฉูุฏ.';
                } else if (question.includes('ูุฏุช') || question.includes('ููุช')) {
                    response += 'ุงฺฏุฑ ุนูุงุฆู ุจุด ุงุฒ ฺูุฏ ุฑูุฒ ุงุฏุงูู ุฏุงุฑุฏ ุง ุจุฏุชุฑ ูโุดูุฏุ ุญุชูุงู ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ.';
                } else if (question.includes('ุนูุงุฆู ุฏฺฏุฑ')) {
                    response += 'ุงฺฏุฑ ุนูุงุฆู ุฏฺฏุฑ ูุซู ุชุจุ ุชูฺฏ ููุณุ ุง ุฏุฑุฏ ุดุฏุฏ ุฏุงุฑุฏุ ููุฑุงู ุจุง ูพุฒุดฺฉ ุชูุงุณ ุจฺฏุฑุฏ.';
                } else {
                    response += 'ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ฺฉู ุฏุงุฏุฏุ ุจูุชุฑ ุงุณุช ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ ุชุง ุชุดุฎุต ุฏููโุชุฑ ุฏุงุดุชู ุจุงุดุฏ.';
                }
                
                response += '\n\n๐ก **ุงุฏุขูุฑ ููู:** ุงู ูุดุงูุฑู ุฌุงฺฏุฒู ูุฒุช ูพุฒุดฺฉ ูุณุช ู ุจุฑุง ุชุดุฎุต ูุทุน ุจุงุฏ ุญุชูุงู ุจุง ูุชุฎุตุต ูุดูุฑุช ฺฉูุฏ.';
                
                addAIMessage(response);
            }, 1500);
        }

        // API Configuration - ูุชุตู ุจู OpenAI
        const API_CONFIG = {
            endpoint: 'https://api.openai.com/v1/chat/completions',
            key: 'sk-jKJb3oeEKvd1ZSNG9ucaCqtsmMyi69L3OjV2IcKFqLkgtYXX'
        };

        // Process AI response with real API
        async function processAIResponse(message) {
            try {
                // ุงฺฏุฑ API ฺฉุงููฺฏ ุดุฏู ุจุงุดุฏุ ุงุฒ API ูุงูุน ุงุณุชูุงุฏู ฺฉู
                if (API_CONFIG.key !== 'YOUR_API_KEY_HERE') {
                    const aiResponse = await callRealAPI(message);
                    addAIMessage(aiResponse);
                    return;
                }
                
                // ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุงุฒ ูพุงุณุฎโูุง ุงุฒ ูพุด ุชุนุฑู ุดุฏู ุงุณุชูุงุฏู ฺฉู
                const lowerMessage = message.toLowerCase();
                let response = '';
                
                // Check for keywords in user message
                if (lowerMessage.includes('ุณุฑุฏุฑุฏ') || lowerMessage.includes('ุณุฑ ุฏุฑุฏ')) {
                    response = aiResponses['ุณุฑุฏุฑุฏ'].response;
            } else if (lowerMessage.includes('ุชุจ') || lowerMessage.includes('ุชุจ')) {
                response = aiResponses['ุชุจ'].response;
            } else if (lowerMessage.includes('ุณุฑูู') || lowerMessage.includes('ฺฉุญู')) {
                response = aiResponses['ุณุฑูู'].response;
            } else if (lowerMessage.includes('ุดฺฉู') || lowerMessage.includes('ูุนุฏู')) {
                response = aiResponses['ุฏุฑุฏ ุดฺฉู'].response;
            } else if (lowerMessage.includes('ุฎุณุชฺฏ') || lowerMessage.includes('ุฎุณุชู')) {
                response = aiResponses['ุฎุณุชฺฏ'].response;
            } else if (lowerMessage.includes('ููุตู') || lowerMessage.includes('ุงุณุชุฎูุงู') || lowerMessage.includes('ุฒุงูู')) {
                response = aiResponses['ุฏุฑุฏ ููุงุตู'].response;
            } else if (lowerMessage.includes('ุงูุฑฺุงูุณ') || lowerMessage.includes('ููุฑ')) {
                response = `๐จ **ููุงุฑุฏ ุงูุฑฺุงูุณ:**

ุงฺฏุฑ ฺฉ ุงุฒ ุงู ุนูุงุฆู ุฑุง ุฏุงุฑุฏุ ููุฑุงู ุจุง ุงูุฑฺุงูุณ ุชูุงุณ ุจฺฏุฑุฏ:

โข ุฏุฑุฏ ุดุฏุฏ ููุณู ุณูู
โข ุชูฺฏ ููุณ ุดุฏุฏ  
โข ุงุฒ ุฏุณุช ุฏุงุฏู ููุดุงุฑ
โข ุฎููุฑุฒ ุดุฏุฏ
โข ุฏุฑุฏ ุดุฏุฏ ุดฺฉู
โข ุนูุงุฆู ุณฺฉุชู (ุงุฎุชูุงู ุตุญุจุชุ ููุฌ)
โข ุชุจ ุจุงูุง 40 ุฏุฑุฌู
โข ุชุดูุฌ

๐ **ุดูุงุฑู ุงูุฑฺุงูุณ: 115**

ุจุฑุง ุณุงุฑ ููุงุฑุฏุ ูุทูุงู ุนูุงุฆู ุฎูุฏ ุฑุง ุฏููโุชุฑ ุชูุถุญ ุฏูุฏ.`;
            } else {
                response = `ูุชุดฺฉุฑู ฺฉู ุณูุงู ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉุฑุฏุฏ. 

ุจุฑุง ุงุฑุงุฆู ุฑุงูููุง ุจูุชุฑุ ูุทูุงู ุนูุงุฆู ุฎูุฏ ุฑุง ุฏููโุชุฑ ุชูุถุญ ุฏูุฏ:

๐น **ูุซุงูโูุง ุงุฒ ุณูุงูุงุช ููุงุณุจ:**
โข "ุณุฑุฏุฑุฏ ุฏุงุฑู ู ฺุดูุงูู ุญุณุงุณ ุจู ููุฑ ุงุณุช"
โข "ุงุฒ ุฏุฑูุฒ ุชุจ ุฏุงุฑู ู ุณุฑูู ูโฺฉูู"
โข "ุฏุฑุฏ ุดฺฉู ุฏุงุฑู ู ุญุงูุช ุชููุน"
โข "ุฎุณุชฺฏ ูุฏุงูู ู ฺฉูโุญูุตูฺฏ"

ุง ูโุชูุงูุฏ ุงุฒ ููุถูุนุงุช ูพุฑุชฺฉุฑุงุฑ ุจุงูุง ุงุณุชูุงุฏู ฺฉูุฏ.

โ๏ธ **ุงุฏุขูุฑ:** ุงู ูุดุงูุฑู ุฌุงฺฏุฒู ูุฒุช ูพุฒุดฺฉ ูุณุช.`;
            }
            
            addAIMessage(response);
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ูพุงุณุฎ:', error);
                addAIMessage('ูุชุฃุณูุงูู ุฏุฑ ุญุงู ุญุงุถุฑ ุงูฺฉุงู ูพุงุณุฎฺฏู ูุฌูุฏ ูุฏุงุฑุฏ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.');
            }
        }

        // ุชุงุจุน ุงุชุตุงู ุจู OpenAI API
        async function callRealAPI(message) {
            try {
                const response = await fetch(API_CONFIG.endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_CONFIG.key}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'ุดูุง ฺฉ ุฏุณุชุงุฑ ูพุฒุดฺฉ ููุดููุฏ ูุณุชุฏ ฺฉู ุจู ุฒุจุงู ูุงุฑุณ ูพุงุณุฎ ูโุฏูุฏ. ุงุทูุงุนุงุช ูพุฒุดฺฉ ุฏูู ู ููุฏ ุงุฑุงุฆู ุฏูุฏ ุงูุง ููุดู ุงุฏุขูุฑ ฺฉูุฏ ฺฉู ุงู ูุดุงูุฑู ุฌุงฺฏุฒู ูุฒุช ูพุฒุดฺฉ ูุณุช.'
                            },
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        max_tokens: 800,
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`OpenAI API Error: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
                }

                const data = await response.json();
                
                if (data.choices && data.choices[0] && data.choices[0].message) {
                    return data.choices[0].message.content;
                } else {
                    throw new Error('ูพุงุณุฎ ูุงูุนุชุจุฑ ุงุฒ API');
                }
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู OpenAI API:', error);
                throw error;
            }
        }

        // Show AI Feature
        function showAIFeature(featureName) {
            // Hide all AI features
            document.querySelectorAll('.ai-feature-content').forEach(feature => {
                feature.classList.add('hidden');
            });

            // Remove active class from all AI tabs
            document.querySelectorAll('[id^="ai-tab-"]').forEach(tab => {
                tab.className = 'ai-tab-inactive px-6 py-3 font-semibold rounded-lg transition-all';
            });

            // Show selected feature
            document.getElementById(`ai-feature-${featureName}`).classList.remove('hidden');
            document.getElementById(`ai-tab-${featureName}`).className = 'ai-tab-active px-6 py-3 font-semibold rounded-lg transition-all';

            currentAIFeature = featureName;

            // Initialize feature-specific content
            if (featureName === 'symptom-checker') {
                loadSymptomCheckboxes();
                setupSeveritySlider();
            } else if (featureName === 'health-tips') {
                setupHealthTipsForm();
            }
        }

        // Load symptom checkboxes
        function loadSymptomCheckboxes() {
            const container = document.getElementById('symptom-checkboxes');
            container.innerHTML = symptomsDatabase.map(symptom => `
                <label class="flex items-center space-x-3 space-x-reverse p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition-all cursor-pointer">
                    <input type="checkbox" value="${symptom.id}" class="symptom-checkbox">
                    <span class="text-sm font-medium">${symptom.name}</span>
                </label>
            `).join('');
        }

        // Setup severity slider
        function setupSeveritySlider() {
            const slider = document.getElementById('symptomSeverity');
            const valueDisplay = document.getElementById('severityValue');
            
            slider.addEventListener('input', function() {
                valueDisplay.textContent = this.value;
            });
        }

        // Analyze symptoms
        async function analyzeSymptoms(event) {
            event.preventDefault();
            
            const selectedSymptoms = Array.from(document.querySelectorAll('.symptom-checkbox:checked')).map(cb => cb.value);
            const age = document.getElementById('symptomAge').value;
            const gender = document.getElementById('symptomGender').value;
            const duration = document.getElementById('symptomDuration').value;
            const severity = document.getElementById('symptomSeverity').value;
            
            if (selectedSymptoms.length === 0) {
                showToast('ูุทูุงู ุญุฏุงูู ฺฉ ุนูุงูุช ุงูุชุฎุงุจ ฺฉูุฏ', 'error');
                return;
            }
            
            const resultsDiv = document.getElementById('symptom-results');
            resultsDiv.classList.remove('hidden');
            
            // ููุงุด ููุฏูฺฏ
            resultsDiv.innerHTML = `
                <div class="text-center py-8">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600">ุฏุฑ ุญุงู ุชุญูู ุนูุงุฆู ุจุง ููุด ูุตููุน...</p>
                </div>
            `;
            
            try {
                // ุชุญูู ุจุง API ูุงูุน ุง ูุญู
                let analysis = await generateSymptomAnalysisWithAPI(selectedSymptoms, age, gender, duration, severity);
            
            resultsDiv.innerHTML = `
                <div class="space-y-6">
                    <div class="text-center">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">๐ ูุชุงุฌ ุชุญูู ุนูุงุฆู</h4>
                        <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ูุงุฑุฏ ุดุฏู</p>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 border border-blue-200">
                        <h5 class="font-bold text-blue-800 mb-3">ุงุญุชูุงูโุชุฑู ุนูู:</h5>
                        <div class="space-y-2">
                            ${analysis.causes.map(cause => `
                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                    <span class="font-medium">${cause.name}</span>
                                    <span class="text-sm bg-blue-600 text-white px-2 py-1 rounded-full">${cause.probability}%</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 border border-green-200">
                        <h5 class="font-bold text-green-800 mb-3">ุชูุตูโูุง ุงููู:</h5>
                        <ul class="space-y-2">
                            ${analysis.recommendations.map(rec => `
                                <li class="flex items-start space-x-3 space-x-reverse">
                                    <span class="text-green-600 mt-1">โ</span>
                                    <span>${rec}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 border border-purple-200">
                        <h5 class="font-bold text-purple-800 mb-3">ูพุดููุงุฏ ุชุฎุตุต:</h5>
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <div class="text-3xl">${analysis.specialty.icon}</div>
                            <div>
                                <div class="font-semibold">${analysis.specialty.name}</div>
                                <div class="text-sm text-gray-600">${analysis.specialty.reason}</div>
                            </div>
                            <button onclick="bookWithSpecialty('${analysis.specialty.id}')" 
                                    class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-all">
                                ุฑุฒุฑู ููุจุช
                            </button>
                        </div>
                    </div>
                    
                    ${analysis.urgency === 'high' ? `
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">๐จ</span>
                                <div>
                                    <h5 class="font-bold text-red-800">ุชูุฌู ููุฑ!</h5>
                                    <p class="text-red-700">ุจุง ุชูุฌู ุจู ุดุฏุช ุนูุงุฆูุ ุชูุตู ูโุดูุฏ ูุฑ ฺู ุณุฑุนโุชุฑ ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ.</p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${analysis.apiResponse ? `
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h5 class="font-bold text-gray-800 mb-2">๐ค ูพุงุณุฎ ฺฉุงูู ููุด ูุตููุน:</h5>
                            <div class="text-sm text-gray-700 whitespace-pre-line">${analysis.apiResponse}</div>
                        </div>
                    ` : ''}
                </div>
            `;
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุชุญูู ุนูุงุฆู:', error);
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                        <span class="text-2xl">โ๏ธ</span>
                        <h5 class="font-bold text-red-800 mb-2">ุฎุทุง ุฏุฑ ุชุญูู</h5>
                        <p class="text-red-700">ูุชุฃุณูุงูู ุงูฺฉุงู ุชุญูู ุนูุงุฆู ุฏุฑ ุญุงู ุญุงุถุฑ ูุฌูุฏ ูุฏุงุฑุฏ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.</p>
                    </div>
                `;
            }
        }

        // ุชุญูู ุนูุงุฆู ุจุง OpenAI API
        async function generateSymptomAnalysisWithAPI(symptoms, age, gender, duration, severity) {
            try {
                const symptomNames = symptoms.map(s => symptomsDatabase.find(sym => sym.id === s)?.name).join(', ');
                const prompt = `ุชุญูู ุนูุงุฆู ูพุฒุดฺฉ:

ุนูุงุฆู: ${symptomNames}
ุณู: ${age}
ุฌูุณุช: ${gender}
ูุฏุช ุฒูุงู ุนูุงุฆู: ${duration}
ุดุฏุช ุนูุงุฆู: ${severity}/10

ูุทูุงู ฺฉ ุชุญูู ฺฉุงูู ู ุฏูู ุงุฑุงุฆู ุฏูุฏ ฺฉู ุดุงูู ููุงุฑุฏ ุฒุฑ ุจุงุดุฏ:

1. ุงุญุชูุงูโุชุฑู ุนูู ุงู ุนูุงุฆู (ุจุง ุฐฺฉุฑ ุฏุฑุตุฏ ุงุญุชูุงู ุชูุฑุจ)
2. ุชูุตูโูุง ุงููู ุจุฑุง ูุฑุงูุจุช ุฏุฑ ููุฒู
3. ูพุดููุงุฏ ููุงุณุจโุชุฑู ุชุฎุตุต ูพุฒุดฺฉ ุจุฑุง ูุฑุงุฌุนู
4. ูุฒุงู ููุฑุช (ฺฉูุ ูุชูุณุทุ ุฒุงุฏ)
5. ุนูุงุฆู ูุดุฏุงุฑุฏููุฏู ฺฉู ูุงุฒ ุจู ูุฑุงุฌุนู ููุฑ ุฏุงุฑูุฏ

ูุทูุงู ูพุงุณุฎ ุฑุง ุจู ุฒุจุงู ูุงุฑุณ ู ุจู ุตูุฑุช ุณุงุฎุชุงุฑุงูุชู ุงุฑุงุฆู ุฏูุฏ.`;

                const apiResponse = await callRealAPI(prompt);
                return parseAPISymptomResponse(apiResponse, symptoms);
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุชุญูู ุนูุงุฆู ุจุง OpenAI API:', error);
                showToast('ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู ููุด ูุตููุนุ ุงุฒ ุชุญูู ูุญู ุงุณุชูุงุฏู ูโุดูุฏ', 'error');
                return generateSymptomAnalysisLocal(symptoms, age, gender, duration, severity);
            }
        }

        // ุชุญูู ูุญู ุนูุงุฆู (ุชุงุจุน ูุจู)
        function generateSymptomAnalysisLocal(symptoms, age, gender, duration, severity) {
            let causes = [];
            let recommendations = [];
            let specialty = { name: 'ูพุฒุดฺฉ ุนููู', icon: '๐ฉบ', id: 'internal', reason: 'ุจุฑุฑุณ ุงููู' };
            let urgency = 'low';
            
            // Analyze based on symptoms
            if (symptoms.includes('headache')) {
                causes.push({ name: 'ุณุฑุฏุฑุฏ ุชูุด', probability: 70 });
                causes.push({ name: 'ูฺฏุฑู', probability: 25 });
                recommendations.push('ุงุณุชุฑุงุญุช ุฏุฑ ูุญุท ุชุงุฑฺฉ ู ุขุฑุงู');
                recommendations.push('ูุตุฑู ูุงุนุงุช ฺฉุงู');
                specialty = { name: 'ูุบุฒ ู ุงุนุตุงุจ', icon: '๐ง', id: 'neurology', reason: 'ุชุฎุตุต ุฏุฑ ุณุฑุฏุฑุฏูุง ูุฒูู' };
            }
            
            if (symptoms.includes('chest-pain')) {
                causes.push({ name: 'ุฏุฑุฏ ุนุถูุงู', probability: 40 });
                causes.push({ name: 'ูุดฺฉู ููุจ', probability: 30 });
                urgency = 'high';
                specialty = { name: 'ููุจ ู ุนุฑูู', icon: 'โค๏ธ', id: 'cardiology', reason: 'ุจุฑุฑุณ ููุฑ ููุจ' };
            }
            
            if (symptoms.includes('fever') && symptoms.includes('cough')) {
                causes.push({ name: 'ุนูููุช ุชููุณ', probability: 80 });
                causes.push({ name: 'ุขููููุงูุฒุง', probability: 60 });
                recommendations.push('ุงุณุชุฑุงุญุช ฺฉุงูู');
                recommendations.push('ูุตุฑู ูุงุนุงุช ฺฏุฑู');
            }
            
            // Adjust based on severity
            if (severity >= 8) {
                urgency = 'high';
                recommendations.unshift('ูุฑุงุฌุนู ููุฑ ุจู ูพุฒุดฺฉ');
            }
            
            // Default recommendations
            if (recommendations.length === 0) {
                recommendations = [
                    'ูุฑุงูุจุช ุงุฒ ุฎูุฏ ู ุงุณุชุฑุงุญุช ฺฉุงู',
                    'ูุตุฑู ูุงุนุงุช ูุฑุงูุงู',
                    'ุฏุฑ ุตูุฑุช ุชุฏุงูู ุนูุงุฆูุ ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ'
                ];
            }
            
            return { causes, recommendations, specialty, urgency };
        }

        // ุชุฌุฒู ูพุงุณุฎ OpenAI API ุจุฑุง ุชุญูู ุนูุงุฆู
        function parseAPISymptomResponse(apiResponse, symptoms) {
            try {
                const response = typeof apiResponse === 'string' ? apiResponse : JSON.stringify(apiResponse);
                
                // ุงุณุชุฎุฑุงุฌ ุงุทูุงุนุงุช ุงุฒ ูพุงุณุฎ ูุชู OpenAI
                let causes = [
                    { name: 'ุชุญูู ููุด ูุตููุน', probability: 85 }
                ];
                
                let recommendations = [
                    'ูุฑุงุฌุนู ุจู ูพุฒุดฺฉ ูุชุฎุตุต',
                    'ูพฺฏุฑ ุนูุงุฆู'
                ];
                
                let specialty = { 
                    name: 'ูพุฒุดฺฉ ุนููู', 
                    icon: '๐ฉบ', 
                    id: 'internal', 
                    reason: 'ุจุฑุฑุณ ุงููู' 
                };
                
                let urgency = 'medium';
                
                // ุชุญูู ููุดููุฏ ูพุงุณุฎ ุจุฑุง ุงุณุชุฎุฑุงุฌ ุงุทูุงุนุงุช
                if (response.includes('ููุฑ') || response.includes('ุงูุฑฺุงูุณ') || response.includes('ุดุฏุฏ')) {
                    urgency = 'high';
                }
                
                if (response.includes('ููุจ') || response.includes('ุณูู')) {
                    specialty = { name: 'ููุจ ู ุนุฑูู', icon: 'โค๏ธ', id: 'cardiology', reason: 'ุนูุงุฆู ูุฑุชุจุท ุจุง ููุจ' };
                } else if (response.includes('ูุบุฒ') || response.includes('ุณุฑุฏุฑุฏ') || response.includes('ุนุตุจ')) {
                    specialty = { name: 'ูุบุฒ ู ุงุนุตุงุจ', icon: '๐ง', id: 'neurology', reason: 'ุนูุงุฆู ุนุตุจ' };
                } else if (response.includes('ุงุณุชุฎูุงู') || response.includes('ููุตู')) {
                    specialty = { name: 'ุงุฑุชููพุฏ', icon: '๐ฆด', id: 'orthopedics', reason: 'ูุดฺฉูุงุช ุงุณุชุฎูุงู ู ููุงุตู' };
                }
                
                return {
                    causes: causes,
                    recommendations: recommendations,
                    specialty: specialty,
                    urgency: urgency,
                    apiResponse: response
                };
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุชุฌุฒู ูพุงุณุฎ OpenAI:', error);
                return generateSymptomAnalysisLocal(symptoms, '', '', '', 5);
            }
        }

        // Add drug
        function addDrug() {
            const input = document.getElementById('drugInput');
            const drugName = input.value.trim();
            
            if (!drugName) {
                showToast('ูุทูุงู ูุงู ุฏุงุฑู ุฑุง ูุงุฑุฏ ฺฉูุฏ', 'error');
                return;
            }
            
            if (addedDrugs.includes(drugName)) {
                showToast('ุงู ุฏุงุฑู ูุจูุงู ุงุถุงูู ุดุฏู ุงุณุช', 'error');
                return;
            }
            
            addedDrugs.push(drugName);
            input.value = '';
            
            updateDrugList();
            updateInteractionButton();
        }

        // Update drug list
        function updateDrugList() {
            const container = document.getElementById('drug-list');
            container.innerHTML = addedDrugs.map((drug, index) => `
                <div class="flex items-center justify-between p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <span class="text-2xl">๐</span>
                        <span class="font-medium">${drug}</span>
                    </div>
                    <button onclick="removeDrug(${index})" class="text-red-600 hover:text-red-800 font-semibold">
                        โ ุญุฐู
                    </button>
                </div>
            `).join('');
        }

        // Remove drug
        function removeDrug(index) {
            addedDrugs.splice(index, 1);
            updateDrugList();
            updateInteractionButton();
        }

        // Update interaction button
        function updateInteractionButton() {
            const btn = document.getElementById('checkInteractionBtn');
            btn.disabled = addedDrugs.length < 2;
        }

        // Check drug interactions
        function checkDrugInteractions() {
            if (addedDrugs.length < 2) {
                showToast('ุจุฑุง ุจุฑุฑุณ ุชุฏุงุฎูุ ุญุฏุงูู 2 ุฏุงุฑู ุงุถุงูู ฺฉูุฏ', 'error');
                return;
            }
            
            const resultsDiv = document.getElementById('interaction-results');
            resultsDiv.classList.remove('hidden');
            
            let interactions = [];
            let warnings = [];
            
            // Check for interactions
            for (let i = 0; i < addedDrugs.length; i++) {
                for (let j = i + 1; j < addedDrugs.length; j++) {
                    const drug1 = addedDrugs[i];
                    const drug2 = addedDrugs[j];
                    
                    if (drugInteractions[drug1] && drugInteractions[drug1].includes(drug2)) {
                        interactions.push({ drug1, drug2, severity: 'ูุชูุณุท' });
                    }
                }
            }
            
            resultsDiv.innerHTML = `
                <div class="space-y-6">
                    <div class="text-center">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">๐ ูุชุงุฌ ุจุฑุฑุณ ุชุฏุงุฎู ุฏุงุฑู</h4>
                    </div>
                    
                    ${interactions.length > 0 ? `
                        <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                            <h5 class="font-bold text-red-800 mb-4">โ๏ธ ุชุฏุงุฎูุงุช ุงูุช ุดุฏู:</h5>
                            <div class="space-y-3">
                                ${interactions.map(interaction => `
                                    <div class="bg-white rounded-lg p-4 border border-red-300">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-semibold">${interaction.drug1} + ${interaction.drug2}</span>
                                            <span class="text-sm bg-red-600 text-white px-2 py-1 rounded-full">${interaction.severity}</span>
                                        </div>
                                        <p class="text-sm text-red-700">ุงู ุฏุงุฑููุง ููฺฉู ุงุณุช ุจุง ฺฉุฏฺฏุฑ ุชุฏุงุฎู ุฏุงุดุชู ุจุงุดูุฏ. ุจุง ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ.</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : `
                        <div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                            <div class="text-4xl mb-3">โ</div>
                            <h5 class="font-bold text-green-800 mb-2">ุชุฏุงุฎู ุฎุทุฑูุงฺฉ ุงูุช ูุดุฏ</h5>
                            <p class="text-green-700">ุฏุงุฑููุง ูุงุฑุฏ ุดุฏู ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู ูุง ุชุฏุงุฎู ุดูุงุฎุชู ุดุฏูโุง ูุฏุงุฑูุฏ.</p>
                        </div>
                    `}
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h5 class="font-bold text-yellow-800 mb-2">โ๏ธ ุชูุฌู ููู:</h5>
                        <ul class="text-yellow-700 space-y-1 text-sm">
                            <li>โข ุงู ุจุฑุฑุณ ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ุนููู ุงุณุช</li>
                            <li>โข ุญุชูุงู ุจุง ูพุฒุดฺฉ ุง ุฏุงุฑูุณุงุฒ ูุดูุฑุช ฺฉูุฏ</li>
                            <li>โข ูุฑฺฏุฒ ุฏุงุฑู ุฑุง ุฎูุฏุณุฑุงูู ูุทุน ูฺฉูุฏ</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // Generate health tips
        function generateHealthTips(event) {
            event.preventDefault();
            
            const age = document.getElementById('tipsAge').value;
            const gender = document.getElementById('tipsGender').value;
            const activity = document.getElementById('tipsActivity').value;
            const conditions = Array.from(document.querySelectorAll('.condition-checkbox:checked')).map(cb => cb.value);
            
            if (!age || !gender || !activity) {
                showToast('ูุทูุงู ุชูุงู ููุฏูุง ุงุฌุจุงุฑ ุฑุง ูพุฑ ฺฉูุฏ', 'error');
                return;
            }
            
            const resultsDiv = document.getElementById('health-tips-results');
            resultsDiv.classList.remove('hidden');
            
            let tips = generatePersonalizedTips(age, gender, activity, conditions);
            
            resultsDiv.innerHTML = `
                <div class="space-y-6">
                    <div class="text-center">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">๐ก ุชูุตูโูุง ุดุฎุตโุณุงุฒ ุดุฏู</h4>
                        <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ุดูุง</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 rounded-lg p-6">
                            <h5 class="font-bold text-blue-800 mb-4">๐โโ๏ธ ูุฑุฒุด ู ูุนุงูุช</h5>
                            <ul class="space-y-2">
                                ${tips.exercise.map(tip => `
                                    <li class="flex items-start space-x-3 space-x-reverse">
                                        <span class="text-blue-600 mt-1">โข</span>
                                        <span class="text-sm">${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="bg-green-50 rounded-lg p-6">
                            <h5 class="font-bold text-green-800 mb-4">๐ฅ ุชุบุฐู</h5>
                            <ul class="space-y-2">
                                ${tips.nutrition.map(tip => `
                                    <li class="flex items-start space-x-3 space-x-reverse">
                                        <span class="text-green-600 mt-1">โข</span>
                                        <span class="text-sm">${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="bg-purple-50 rounded-lg p-6">
                            <h5 class="font-bold text-purple-800 mb-4">๐ด ุฎูุงุจ ู ุงุณุชุฑุงุญุช</h5>
                            <ul class="space-y-2">
                                ${tips.sleep.map(tip => `
                                    <li class="flex items-start space-x-3 space-x-reverse">
                                        <span class="text-purple-600 mt-1">โข</span>
                                        <span class="text-sm">${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="bg-orange-50 rounded-lg p-6">
                            <h5 class="font-bold text-orange-800 mb-4">๐ฉบ ุจุฑุฑุณโูุง ุฏูุฑูโุง</h5>
                            <ul class="space-y-2">
                                ${tips.checkups.map(tip => `
                                    <li class="flex items-start space-x-3 space-x-reverse">
                                        <span class="text-orange-600 mt-1">โข</span>
                                        <span class="text-sm">${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    ${conditions.length > 0 ? `
                        <div class="bg-red-50 rounded-lg p-6">
                            <h5 class="font-bold text-red-800 mb-4">โ๏ธ ุชูุตูโูุง ูฺู</h5>
                            <ul class="space-y-2">
                                ${tips.special.map(tip => `
                                    <li class="flex items-start space-x-3 space-x-reverse">
                                        <span class="text-red-600 mt-1">โข</span>
                                        <span class="text-sm">${tip}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    ` : ''}
                    
                    ${analysis.apiResponse ? `
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h5 class="font-bold text-gray-800 mb-2">๐ค ูพุงุณุฎ ฺฉุงูู ููุด ูุตููุน:</h5>
                            <div class="text-sm text-gray-700 whitespace-pre-line">${analysis.apiResponse}</div>
                        </div>
                    ` : ''}
                </div>
            `;
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุชุญูู ุนูุงุฆู:', error);
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                        <span class="text-2xl">โ๏ธ</span>
                        <h5 class="font-bold text-red-800 mb-2">ุฎุทุง ุฏุฑ ุชุญูู</h5>
                        <p class="text-red-700">ูุชุฃุณูุงูู ุงูฺฉุงู ุชุญูู ุนูุงุฆู ุฏุฑ ุญุงู ุญุงุถุฑ ูุฌูุฏ ูุฏุงุฑุฏ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.</p>
                    </div>
                `;
            }
        }

        // Generate personalized tips
        function generatePersonalizedTips(age, gender, activity, conditions) {
            let tips = {
                exercise: [],
                nutrition: [],
                sleep: [],
                checkups: [],
                special: []
            };
            
            // Age-based recommendations
            if (age < 30) {
                tips.exercise.push('ูุฑุฒุดโูุง ูุฏุฑุช 3 ุจุงุฑ ุฏุฑ ููุชู');
                tips.nutrition.push('ูุตุฑู ฺฉุงู ูพุฑูุชุฆู ุจุฑุง ุฑุดุฏ ุนุถูุงุช');
                tips.checkups.push('ุจุฑุฑุณ ุณุงูุงูู ุนููู');
            } else if (age >= 30 && age < 50) {
                tips.exercise.push('ุชุฑฺฉุจ ูุฑุฒุด ููุงุฒ ู ูุฏุฑุช');
                tips.nutrition.push('ฺฉุงูุด ูุตุฑู ููุฏ ู ููฺฉ');
                tips.checkups.push('ุจุฑุฑุณ ูุดุงุฑ ุฎูู ูุฑ 2 ุณุงู');
            } else {
                tips.exercise.push('ูุฑุฒุดโูุง ฺฉูโูุดุงุฑ ูุซู ูพุงุฏูโุฑู');
                tips.nutrition.push('ูุตุฑู ฺฉูุณู ู ูุชุงูู D');
                tips.checkups.push('ุจุฑุฑุณโูุง ุฏูุฑูโุง ูุฑ 6 ูุงู');
            }
            
            // Gender-based recommendations
            if (gender === 'female') {
                tips.nutrition.push('ูุตุฑู ุขูู ู ุงุณุฏ ูููฺฉ');
                tips.checkups.push('ูุงููฺฏุฑุงู ุณุงูุงูู (ุจุงูุง 40 ุณุงู)');
            }
            
            // Activity-based recommendations
            if (activity === 'low') {
                tips.exercise.push('ุดุฑูุน ุจุง 15 ุฏููู ูพุงุฏูโุฑู ุฑูุฒุงูู');
                tips.exercise.push('ุงุณุชูุงุฏู ุงุฒ ูพูู ุจู ุฌุง ุขุณุงูุณูุฑ');
            } else if (activity === 'high') {
                tips.exercise.push('ุชูุฌู ุจู ุงุณุชุฑุงุญุช ุจู ุชูุฑูุงุช');
                tips.nutrition.push('ูุตุฑู ฺฉุงู ฺฉุฑุจููุฏุฑุงุช');
            }
            
            // Sleep recommendations
            tips.sleep.push('ุฎูุงุจ 7-8 ุณุงุนุชู ุดุจุงูู');
            tips.sleep.push('ุงุฌุชูุงุจ ุงุฒ ฺฉุงูุฆู 6 ุณุงุนุช ูุจู ุฎูุงุจ');
            
            // Condition-based special recommendations
            conditions.forEach(condition => {
                if (condition === 'diabetes') {
                    tips.special.push('ฺฉูุชุฑู ููุฏ ุฎูู ุฑูุฒุงูู');
                    tips.special.push('ุฑฺู ุบุฐุง ฺฉูโููุฏ');
                } else if (condition === 'hypertension') {
                    tips.special.push('ฺฉุงูุด ูุตุฑู ููฺฉ');
                    tips.special.push('ูุฏุฑุช ุงุณุชุฑุณ');
                }
            });
            
            return tips;
        }

        // Generate appointment suggestion
        function generateAppointmentSuggestion(event) {
            event.preventDefault();
            
            const symptoms = document.getElementById('suggestionSymptoms').value.trim();
            const urgency = document.getElementById('suggestionUrgency').value;
            const history = document.getElementById('suggestionHistory').value;
            
            if (!symptoms) {
                showToast('ูุทูุงู ุนูุงุฆู ุฎูุฏ ุฑุง ุดุฑุญ ุฏูุฏ', 'error');
                return;
            }
            
            const resultsDiv = document.getElementById('suggestion-results');
            resultsDiv.classList.remove('hidden');
            
            let suggestion = analyzeForSpecialty(symptoms, urgency, history);
            
            resultsDiv.innerHTML = `
                <div class="space-y-6">
                    <div class="text-center">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">๐ฏ ูพุดููุงุฏ ุชุฎุตุต</h4>
                        <p class="text-gray-600">ุจุฑ ุงุณุงุณ ุชุญูู ุนูุงุฆู ุดูุง</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-200">
                        <div class="flex items-center space-x-4 space-x-reverse mb-4">
                            <div class="text-4xl">${suggestion.specialty.icon}</div>
                            <div>
                                <h5 class="text-xl font-bold text-purple-800">${suggestion.specialty.name}</h5>
                                <p class="text-purple-600">${suggestion.specialty.description}</p>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4 mb-4">
                            <h6 class="font-semibold text-gray-800 mb-2">ุฏูู ูพุดููุงุฏ:</h6>
                            <p class="text-gray-700">${suggestion.reason}</p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            ${suggestion.doctors.map(doctor => `
                                <div class="bg-white rounded-lg p-4 border border-gray-200">
                                    <div class="flex items-center space-x-3 space-x-reverse mb-2">
                                        <span class="text-2xl">๐จโโ๏ธ</span>
                                        <div>
                                            <div class="font-semibold">${doctor.name}</div>
                                            <div class="text-sm text-gray-600">${doctor.specialty}</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-500">${doctor.experience}</span>
                                        <button onclick="selectDoctor('${doctor.id}', '${doctor.name}')" 
                                                class="bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-all">
                                            ุงูุชุฎุงุจ
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="mt-4 text-center">
                            <button onclick="bookWithSpecialty('${suggestion.specialty.id}')" 
                                    class="bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-all">
                                ๐ ุฑุฒุฑู ููุจุช ุจุง ุงู ุชุฎุตุต
                            </button>
                        </div>
                    </div>
                    
                    ${urgency === 'emergency' ? `
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">๐จ</span>
                                <div>
                                    <h5 class="font-bold text-red-800">ุงูุฑฺุงูุณ!</h5>
                                    <p class="text-red-700">ุจุง ุชูุฌู ุจู ุงูููุช ุงูุฑฺุงูุณุ ููุฑุงู ุจุง ุจูุงุฑุณุชุงู ุชูุงุณ ุจฺฏุฑุฏ: 115</p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${analysis.apiResponse ? `
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h5 class="font-bold text-gray-800 mb-2">๐ค ูพุงุณุฎ ฺฉุงูู ููุด ูุตููุน:</h5>
                            <div class="text-sm text-gray-700 whitespace-pre-line">${analysis.apiResponse}</div>
                        </div>
                    ` : ''}
                </div>
            `;
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุชุญูู ุนูุงุฆู:', error);
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                        <span class="text-2xl">โ๏ธ</span>
                        <h5 class="font-bold text-red-800 mb-2">ุฎุทุง ุฏุฑ ุชุญูู</h5>
                        <p class="text-red-700">ูุชุฃุณูุงูู ุงูฺฉุงู ุชุญูู ุนูุงุฆู ุฏุฑ ุญุงู ุญุงุถุฑ ูุฌูุฏ ูุฏุงุฑุฏ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.</p>
                    </div>
                `;
            }
        }

        // Analyze for specialty
        function analyzeForSpecialty(symptoms, urgency, history) {
            const lowerSymptoms = symptoms.toLowerCase();
            let specialty = specialtiesData[0]; // Default to cardiology
            let reason = 'ุจุฑ ุงุณุงุณ ุนูุงุฆู ุชูุตู ุดุฏู';
            
            // Analyze symptoms for specialty
            if (lowerSymptoms.includes('ุณุฑุฏุฑุฏ') || lowerSymptoms.includes('ุณุฑฺฏุฌู') || lowerSymptoms.includes('ูุบุฒ')) {
                specialty = specialtiesData.find(s => s.id === 'neurology');
                reason = 'ุนูุงุฆู ูุฑุชุจุท ุจุง ุณุณุชู ุนุตุจ ุดูุงุณุง ุดุฏ';
            } else if (lowerSymptoms.includes('ููุจ') || lowerSymptoms.includes('ุณูู') || lowerSymptoms.includes('ููุณ')) {
                specialty = specialtiesData.find(s => s.id === 'cardiology');
                reason = 'ุนูุงุฆู ูุฑุชุจุท ุจุง ููุจ ู ุนุฑูู ุดูุงุณุง ุดุฏ';
            } else if (lowerSymptoms.includes('ุงุณุชุฎูุงู') || lowerSymptoms.includes('ููุตู') || lowerSymptoms.includes('ฺฉูุฑ')) {
                specialty = specialtiesData.find(s => s.id === 'orthopedics');
                reason = 'ุนูุงุฆู ูุฑุชุจุท ุจุง ุงุณุชุฎูุงู ู ููุงุตู ุดูุงุณุง ุดุฏ';
            } else if (lowerSymptoms.includes('ูพูุณุช') || lowerSymptoms.includes('ูู') || lowerSymptoms.includes('ุฌูุด')) {
                specialty = specialtiesData.find(s => s.id === 'dermatology');
                reason = 'ุนูุงุฆู ูุฑุชุจุท ุจุง ูพูุณุช ู ูู ุดูุงุณุง ุดุฏ';
            }
            
            return {
                specialty: specialty,
                reason: reason,
                doctors: specialty.doctors
            };
        }

        // Setup health tips form
        function setupHealthTipsForm() {
            document.getElementById('healthTipsForm').addEventListener('submit', generateHealthTips);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            initializeSDKs();
            updateTime();
            setInterval(updateTime, 60000);
            
            // Setup form submissions
            document.getElementById('appointmentForm').addEventListener('submit', bookAppointment);
            document.getElementById('consultationForm').addEventListener('submit', sendMessage);
            document.getElementById('symptomForm').addEventListener('submit', analyzeSymptoms);
            document.getElementById('suggestionForm').addEventListener('submit', generateAppointmentSuggestion);
            
            // Initialize first section
            showSection('home');
            updateStats();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99f841329528a078',t:'MTc2MzMwOTM4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>